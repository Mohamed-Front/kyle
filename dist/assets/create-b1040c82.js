import{_ as N,O as j,v as z,i,o as f,c as g,a as t,P as d,b as y,h as o,p as w,g as l,F as B,A as I,J as v,C as R,s as $}from"./index-063be7f6.js";const A={class:"max-w-4xl mx-auto p-6",dir:"rtl"},G={class:"bg-white rounded-2xl shadow-2xl overflow-hidden"},J={class:"p-8"},L={key:0,class:"space-y-6"},O=["src"],S={class:"flex justify-center gap-4"},U={class:"cursor-pointer"},W={key:1,class:"space-y-5"},q={class:"flex justify-center gap-6 pt-12"},E={__name:"create",setup(M){const b=j(),r=z(),n=i(""),u=i(!1),c=i(null),p=i(null),m=i(!1),D=a=>{a.preventDefault(),m.value=!0},k=()=>{m.value=!1},C=a=>{a.preventDefault(),m.value=!1;const e=a.dataTransfer.files[0];e&&e.type.startsWith("image/")?_(e):r.add({severity:"warn",summary:"ملف غير صالح",detail:"يرجى رفع صورة فقط",life:3e3})},x=a=>{const e=a.target.files[0];e&&_(e)},_=a=>{if(a.size>10*1024*1024){r.add({severity:"warn",summary:"الحجم كبير",detail:"يجب ألا يتجاوز حجم الصورة 10 ميجابايت",life:4e3});return}c.value=a;const e=new FileReader;e.onload=s=>{p.value=s.target.result},e.readAsDataURL(a)},F=()=>{c.value=null,p.value=null;const a=document.querySelector('input[type="file"]');a&&(a.value="")},V=async()=>{var e,s,h;if(!((e=n.value)!=null&&e.trim())){r.add({severity:"error",summary:"حقل مطلوب",detail:"اسم العضو مطلوب",life:3e3});return}if(!c.value){r.add({severity:"error",summary:"حقل مطلوب",detail:"يرجى رفع صورة العضو",life:3e3});return}u.value=!0;const a=new FormData;a.append("name",n.value.trim()),a.append("member_image",c.value);try{await $.post("/api/team",a,{headers:{"Content-Type":"multipart/form-data"}}),r.add({severity:"success",summary:"تم بنجاح!",detail:"تم إضافة العضو إلى الفريق بنجاح",life:4e3}),setTimeout(()=>{b.push({name:"team"})},1500)}catch(P){const T=((h=(s=P.response)==null?void 0:s.data)==null?void 0:h.message)||"فشل إضافة العضو";r.add({severity:"error",summary:"خطأ",detail:T,life:5e3})}finally{u.value=!1}};return(a,e)=>(f(),g(B,null,[t("div",A,[t("div",G,[e[5]||(e[5]=t("div",{class:"bg-gradient-to-l from-[#2c3e50] to-[#34495e] px-8 py-7"},[t("h1",{class:"text-3xl font-bold text-white text-center"}," إضافة عضو جديد للفريق "),t("p",{class:"text-center text-white/90 mt-2 text-lg"}," أدخل اسم العضو وصورته الشخصية ")],-1)),t("div",J,[t("form",{onSubmit:d(V,["prevent"]),class:"space-y-10"},[t("div",null,[e[2]||(e[2]=t("label",{class:"block text-sm font-bold text-gray-700 mb-2"},[y(" اسم العضو "),t("span",{class:"text-red-500"},"*")],-1)),o(l(I),{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=s=>n.value=s),placeholder:"مثال: محمد أحمد",class:w(["w-full text-lg py-3",{"p-invalid":!n.value&&a.submitted}])},null,8,["modelValue","class"])]),t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-bold text-gray-700 mb-3"},[y(" صورة العضو "),t("span",{class:"text-red-500"},"*")],-1)),t("div",{onDragover:d(D,["prevent"]),onDragleave:d(k,["prevent"]),onDrop:d(C,["prevent"]),class:w(["relative border-3 border-dashed rounded-2xl p-12 text-center cursor-pointer transition-all duration-300 shadow-md",m.value?"border-blue-600 bg-blue-50/70":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"])},[t("input",{type:"file",accept:"image/*",onChange:x,class:"absolute inset-0 opacity-0 cursor-pointer z-10"},null,32),p.value?(f(),g("div",L,[t("img",{src:p.value,alt:"معاينة صورة العضو",class:"mx-auto w-64 h-64 rounded-full object-cover shadow-2xl border-8 border-white"},null,8,O),t("div",S,[o(l(v),{type:"button",label:"إزالة الصورة",icon:"pi pi-trash",severity:"danger",outlined:"",onClick:d(F,["stop"])}),t("label",U,[o(l(v),{label:"تغيير الصورة",icon:"pi pi-camera",outlined:""}),t("input",{type:"file",accept:"image/*",onChange:x,class:"hidden"},null,32)])])])):(f(),g("div",W,[...e[3]||(e[3]=[t("i",{class:"pi pi-user text-7xl text-gray-400"},null,-1),t("div",null,[t("p",{class:"text-xl font-bold text-gray-700"},[t("span",{class:"text-blue-600 font-extrabold"},"اضغط للرفع"),y(" أو اسحب وأفلت الصورة هنا ")]),t("p",{class:"text-sm text-gray-500 mt-2"}," المقاس الموصى: 400×400 بكسل أو أكبر • صيغ PNG، JPG، WebP • الحد الأقصى 10 ميجابايت ")],-1)])]))],34)]),t("div",q,[o(l(v),{type:"button",label:"إلغاء",icon:"pi pi-times",severity:"secondary",outlined:"",onClick:e[1]||(e[1]=s=>l(b).back()),disabled:u.value,class:"px-10 py-3 text-lg"},null,8,["disabled"]),o(l(v),{type:"submit",label:"إضافة العضو",icon:"pi pi-plus",loading:u.value,class:"px-12 py-3 text-lg font-bold"},null,8,["loading"])])],32)])])]),o(l(R),{position:"top-right"})],64))}},K=N(E,[["__scopeId","data-v-51dd6708"]]);export{K as default};

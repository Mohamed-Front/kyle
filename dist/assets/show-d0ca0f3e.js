import{_ as U,N as A,R as L,W,u as M,r as m,o as q,g as _,a as i,c as r,d as l,b as t,w as C,t as a,j as s,F as z,B as G,i as S,e as x,h as H,p as J,f as K}from"./index-5ffc309d.js";const Q=h=>(J("data-v-f335df21"),h=h(),K(),h),X={class:"grid",dir:"rtl"},Y={class:"col-12"},Z={class:"card p-4 shadow-2 border-round"},ee={class:"text-2xl font-bold"},le={key:0,class:"flex justify-content-center align-items-center py-4"},se={key:1,class:"card shadow-lg bg-white surface-0 p-4"},te={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},oe={class:"col-12 md:col-6"},ae={class:"field mb-4"},ce={class:"font-bold mb-2"},ne={class:"field mb-4"},de={class:"font-bold mb-2"},ie={class:"field mb-4"},re={class:"font-bold mb-2"},ue={class:"field mb-4"},pe={class:"font-bold mb-2"},me={class:"col-12 md:col-6"},_e={class:"field mb-4"},ve={class:"font-bold mb-2"},he={class:"field mb-4"},be={class:"font-bold mb-2"},fe={class:"field mb-4"},ye={class:"font-bold mb-2"},ge={class:"field mb-4"},we={class:"font-bold mb-2"},xe={key:0,class:"mt-6"},ke={class:"text-xl font-bold mb-4"},Pe={class:"flex align-items-center"},Ve={class:"flex justify-content-between"},Ce={key:2,class:"text-center py-4"},Se=Q(()=>l("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),Be={class:"text-xl"},Ie={setup(h){const{t:e}=A(),B=L(),g=W(),u=M(),b=m(!0),c=m(null),v=m(null),I=m([{label:e("complaint.statusOptions.active"),value:1},{label:e("complaint.statusOptions.inactive"),value:0},{label:e("complaint.statusOptions.pending"),value:2}]),n=m([{procedure:""}]),k=m(!0),w=()=>{b.value=!0,x.get(`/api/complaint/${g.params.id}`).then(o=>{b.value=!1,c.value=o.data.data,n.value=o.data.data.procedures,v.value=o.data.data.status}).catch(o=>{b.value=!1,u.add({severity:"error",summary:e("error"),detail:e("complaint.loadError"),life:3e3}),console.error("خطأ في جلب الشكوى:",o)})},T=()=>{x.post(`/api/complaint/change/status/${g.params.id}`,{status:v.value}).then(()=>{u.add({severity:"success",summary:e("success"),detail:e("complaint.updateSuccess"),life:3e3}),w()}).catch(o=>{u.add({severity:"error",summary:e("error"),detail:e("complaint.updateError"),life:3e3}),console.error("خطأ في تحديث الحالة:",o)})},D=()=>{n.value.push({procedure:""})},F=o=>{n.value.length>1&&n.value.splice(o,1)},E=()=>{const o={procedures:n.value.filter(p=>p.procedure.trim()!=="")};if(o.procedures.length===0){u.add({severity:"warn",summary:e("warning"),detail:e("complaint.noProcedures"),life:3e3});return}x.post(`/api/complaint/add/procedures/${g.params.id}`,o).then(()=>{u.add({severity:"success",summary:e("success"),detail:e("complaint.proceduresAdded"),life:3e3}),n.value=[{procedure:""}],k.value=!0,w()}).catch(p=>{u.add({severity:"error",summary:e("error"),detail:e("complaint.proceduresError"),life:3e3}),console.error("خطأ في إضافة الإجراءات:",p)})},N=()=>{B.push({name:"Complaint"})};return q(()=>{w()}),(o,p)=>{const f=_("Button"),O=_("Toolbar"),$=_("Toast"),j=_("ProgressSpinner"),d=_("InputText"),R=_("Dropdown");return i(),r("div",X,[l("div",Y,[l("div",Z,[t(O,{class:"mb-4"},{start:C(()=>[l("h2",ee,a(s(e)("complaint.details")),1)]),end:C(()=>[t(f,{label:s(e)("complaint.back"),icon:"pi pi-arrow-right",class:"p-button-secondary ml-2",onClick:N},null,8,["label"])]),_:1}),t($),b.value?(i(),r("div",le,[t(j,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])):c.value?(i(),r("div",se,[l("div",te,[l("div",oe,[l("div",ae,[l("label",ce,a(s(e)("complaint.number")),1),t(d,{value:c.value.number,readonly:"",class:"w-full"},null,8,["value"])]),l("div",ne,[l("label",de,a(s(e)("complaint.name")),1),t(d,{value:c.value.name,readonly:"",class:"w-full"},null,8,["value"])]),l("div",ie,[l("label",re,a(s(e)("complaint.email")),1),t(d,{value:c.value.email,readonly:"",class:"w-full"},null,8,["value"])]),l("div",ue,[l("label",pe,a(s(e)("complaint.phone")),1),t(d,{value:c.value.phone,readonly:"",class:"w-full"},null,8,["value"])])]),l("div",me,[l("div",_e,[l("label",ve,a(s(e)("complaint.date")),1),t(d,{value:c.value.date,readonly:"",class:"w-full"},null,8,["value"])]),l("div",he,[l("label",be,a(s(e)("complaint.complaint")),1),t(d,{value:c.value.complaint,readonly:"",class:"w-full"},null,8,["value"])]),l("div",fe,[l("label",ye,a(s(e)("complaint.status")),1),t(R,{modelValue:v.value,"onUpdate:modelValue":p[0]||(p[0]=y=>v.value=y),options:I.value,optionLabel:"label",optionValue:"value",placeholder:s(e)("complaint.selectStatus"),disabled:v.value===1,onChange:T},null,8,["modelValue","options","placeholder","disabled"])]),l("div",ge,[l("label",we,a(s(e)("complaint.notes")),1),t(d,{value:c.value.notes||"-",readonly:"",class:"w-full"},null,8,["value"])])])]),k.value?(i(),r("div",xe,[l("h3",ke,a(s(e)("complaint.addProcedures")),1),(i(!0),r(z,null,G(n.value,(y,P)=>(i(),r("div",{key:P,class:"field mb-4"},[l("div",Pe,[t(d,{modelValue:y.procedure,"onUpdate:modelValue":V=>y.procedure=V,placeholder:s(e)("complaint.enterProcedure"),class:"w-full ml-2"},null,8,["modelValue","onUpdate:modelValue","placeholder"]),n.value.length>1?(i(),H(f,{key:0,icon:"pi pi-trash",class:"p-button-danger p-button-sm",onClick:V=>F(P)},null,8,["onClick"])):S("",!0)])]))),128)),l("div",Ve,[t(f,{label:s(e)("complaint.addAnotherProcedure"),icon:"pi pi-plus",class:"mb-4 mx-3",onClick:D},null,8,["label"]),t(f,{label:s(e)("complaint.submitProcedures"),icon:"pi pi-check",class:"p-button-primary mb-4",onClick:E},null,8,["label"])])])):S("",!0)])):(i(),r("div",Ce,[Se,l("p",Be,a(s(e)("complaint.noData")),1)]))])])])}}},De=U(Ie,[["__scopeId","data-v-f335df21"]]);export{De as default};

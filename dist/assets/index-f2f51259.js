import{_ as te,N as oe,R as ae,u as se,r as i,S as le,U as ne,o as ie,g as p,H as U,a as D,c as S,d as e,b as n,w as d,I as x,h as re,t as r,j as s,F as ce,B as de,V as pe,e as j,A as z,z as ue,p as _e,f as ve}from"./index-5ffc309d.js";const u=y=>(_e("data-v-1938760c"),y=y(),ve(),y),he={class:"grid"},me={class:"col-12"},ge={class:"card p-4 shadow-2 border-round"},fe={class:"text-2xl font-bold"},be={class:"flex gap-2"},xe={class:"p-input-icon-left"},ye=u(()=>e("i",{class:"pi pi-search"},null,-1)),we={class:"card shadow-1 surface-0"},ke={class:"text-center py-4"},Ce=u(()=>e("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),De={class:"text-xl"},Te={class:"flex justify-content-center align-items-center py-4"},Ve={class:"p-paginator p-component p-unselectable-text mt-3"},Se={class:"p-paginator-left-content"},Ie={class:"p-paginator-current"},Re={class:"p-paginator-right-content"},$e={class:"p-paginator-pages"},Be=["disabled"],Pe=u(()=>e("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)),Ne=[Pe],Me=["disabled"],Ee=u(()=>e("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)),Fe=[Ee],Ue=["onClick"],je=["disabled"],ze=u(()=>e("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)),Ae=[ze],Ge=["disabled"],He=u(()=>e("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)),Le=[He],Oe={class:"p-paginator-rpp-options"},Qe={class:"flex align-items-center justify-content-center"},We=u(()=>e("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),qe={setup(y){const{t}=oe(),I=ae(),T=se(),w=i(!0);i({name:"",permissions:[]});const R=i([]),h=i(!1);i(null);const $=i(null),B=i({}),P=i(""),k=i(""),c=i(1),V=i(0),m=i(10),_=i(0),N=i(0),M=i(0),A=()=>{B.value={global:{value:null,matchMode:pe.CONTAINS}}},g=()=>{w.value=!0,j.get("/api/role",{params:{page:c.value,limit:m.value,search:k.value}}).then(a=>{w.value=!1,R.value=a.data.data,V.value=a.data.pagination.total,_.value=a.data.pagination.last_page,N.value=a.data.pagination.from,M.value=a.data.pagination.to}).catch(a=>{w.value=!1,T.add({severity:"error",summary:t("error"),detail:t("role.loadError"),life:3e3}),console.error("Error fetching roles:",a)})},f=a=>{a>=1&&a<=_.value&&(c.value=a,g())},G=a=>{m.value=a.value,c.value=1,g()};le(k,a=>{c.value=1,g()});const H=()=>{I.push({name:"roles-create"})},L=a=>{I.push({name:"roles-update",params:{id:a}})},O=a=>{P.value=a,h.value=!0},Q=()=>{j.delete(`/api/role/${P.value}`).then(()=>{g(),h.value=!1,T.add({severity:"success",summary:t("success"),detail:t("role.deleteSuccess"),life:3e3})}).catch(a=>{T.add({severity:"error",summary:t("error"),detail:t("role.deleteError"),life:3e3})})},W=()=>{$.value.exportCSV()};return ne(()=>{A()}),ie(()=>{g()}),(a,l)=>{const q=p("InputText"),v=p("Button"),J=p("Toolbar"),K=p("Toast"),C=p("Column"),X=p("ProgressSpinner"),Y=p("DataTable"),Z=p("Dropdown"),ee=p("Dialog"),b=U("can"),E=U("tooltip");return D(),S("div",he,[e("div",me,[e("div",ge,[n(J,{class:"mb-4"},{start:d(()=>[e("h2",fe,r(s(t)("role.roles")),1)]),end:d(()=>[e("div",be,[e("span",xe,[ye,n(q,{modelValue:k.value,"onUpdate:modelValue":l[0]||(l[0]=o=>k.value=o),placeholder:s(t)("role.search")},null,8,["modelValue","placeholder"])]),x(n(v,{label:s(t)("role.export"),icon:"pi pi-upload",class:"p-export",onClick:W},null,8,["label"]),[[b,"export roles"]]),x(n(v,{label:s(t)("role.new"),icon:"pi pi-plus",class:"p-button-success",onClick:H},null,8,["label"]),[[b,"create roles"]])])]),_:1}),n(K),e("div",we,[x((D(),re(Y,{ref_key:"dt",ref:$,value:R.value,loading:w.value,"data-key":"id",paginator:!1,rows:m.value,filters:B.value,totalRecords:V.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[e("div",ke,[Ce,e("p",De,r(s(t)("role.noData")),1)])]),loading:d(()=>[e("div",Te,[n(X,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[n(C,{"selection-mode":"multiple","header-style":"width: 3rem"}),n(C,{field:"id",header:s(t)("role.iD"),sortable:!0,"header-style":"width:14%; min-width:5rem;"},{body:d(o=>[z(r(o.data.id),1)]),_:1},8,["header"]),n(C,{field:"name",header:s(t)("role.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(o=>[z(r(o.data.name),1)]),_:1},8,["header"]),n(C,{header:s(t)("actions"),"header-style":"min-width:10rem;"},{body:d(o=>[x(n(v,{icon:"pi pi-pencil",class:"p-detail",onClick:F=>L(o.data.id)},null,8,["onClick"]),[[b,"edit roles"],[E,s(t)("edit"),void 0,{top:!0}]]),x(n(v,{icon:"pi pi-trash mx-2",class:"p-delete",onClick:F=>O(o.data.id)},null,8,["onClick"]),[[b,"delete roles"],[E,s(t)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[b,"list roles"]]),e("div",Ve,[e("div",Se,[e("span",Ie,r(s(t)("role.showing"))+" "+r(N.value)+" "+r(s(t)("role.to"))+" "+r(M.value)+" "+r(s(t)("role.of"))+" "+r(V.value)+" "+r(s(t)("role.entries")),1)]),e("div",Re,[e("span",$e,[e("button",{class:"p-paginator-first p-paginator-element p-link",disabled:c.value===1,onClick:l[1]||(l[1]=o=>f(1))},Ne,8,Be),e("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:c.value===1,onClick:l[2]||(l[2]=o=>f(c.value-1))},Fe,8,Me),(D(!0),S(ce,null,de(_.value,o=>(D(),S("button",{key:o,class:ue(["p-paginator-page p-paginator-element p-link",{"p-highlight":o===c.value}]),onClick:F=>f(o)},r(o),11,Ue))),128)),e("button",{class:"p-paginator-next p-paginator-element p-link",disabled:c.value===_.value,onClick:l[3]||(l[3]=o=>f(c.value+1))},Ae,8,je),e("button",{class:"p-paginator-last p-paginator-element p-link",disabled:c.value===_.value,onClick:l[4]||(l[4]=o=>f(_.value))},Le,8,Ge)]),e("span",Oe,[n(Z,{modelValue:m.value,"onUpdate:modelValue":l[5]||(l[5]=o=>m.value=o),options:[5,10,20,30],onChange:G,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])]),n(ee,{visible:h.value,"onUpdate:visible":l[7]||(l[7]=o=>h.value=o),style:{width:"450px"},header:s(t)("role.deleteConfirmTitle"),modal:!0},{footer:d(()=>[n(v,{label:s(t)("no"),icon:"pi pi-times",class:"p-button-text",onClick:l[6]||(l[6]=o=>h.value=!1)},null,8,["label"]),n(v,{label:s(t)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Q},null,8,["label"])]),default:d(()=>[e("div",Qe,[We,e("span",null,r(s(t)("role.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},Ke=te(qe,[["__scopeId","data-v-1938760c"]]);export{Ke as default};

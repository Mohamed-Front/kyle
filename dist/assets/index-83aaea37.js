import{_ as ae,u as le,r as s,U as oe,S as se,o as ie,g as p,H as ne,a as V,c as D,d as t,b as l,w as i,t as _,F as de,B as re,i as ue,V as ce,e as T,A,I as E,z as pe,p as ve,f as me}from"./index-5ffc309d.js";const u=x=>(ve("data-v-9019a866"),x=x(),me(),x),_e={class:"grid"},he={class:"col-12"},fe={class:"card p-4 shadow-2 border-round"},ge=u(()=>t("h2",{class:"text-2xl font-bold"},"قائمة الجهات",-1)),be={class:"flex gap-2"},ye={class:"p-input-icon-left"},xe=u(()=>t("i",{class:"pi pi-search"},null,-1)),ke={class:"card shadow-1 surface-0"},Ce=u(()=>t("div",{class:"text-center py-4"},[t("i",{class:"pi pi-exclamation-circle text-2xl mb-2"}),t("p",{class:"text-xl"},"لا توجد بيانات")],-1)),we={class:"flex justify-content-center align-items-center py-4"},Ve={key:0,class:"p-paginator p-component p-unselectable-text mt-3"},De={class:"p-paginator-left-content"},Te={class:"p-paginator-current"},$e={class:"p-paginator-right-content"},Se={class:"p-paginator-pages"},Ue=["disabled"],Ie=u(()=>t("span",{class:"pi-paginator-icon pi pi-angle-double-left"},null,-1)),Be=[Ie],Ne=["disabled"],Pe=u(()=>t("span",{class:"pi pi-paginator-icon pi-angle-left"},null,-1)),Me=[Pe],Re=["onClick"],Fe=["disabled"],ze=u(()=>t("span",{class:"p-paginator-icon pi-angle-right"},null,-1)),je=[ze],Ae=["disabled"],Ee=u(()=>t("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)),Ge=[Ee],He={class:"options-p-paginator-rpp-options"},Le={class:"field p-field"},Oe=u(()=>t("label",{for:"authority-name"},"اسم الجهة",-1)),Qe={class:"field"},qe=u(()=>t("label",{for:"authority-name-update"},"اسم الجهة",-1)),Je=u(()=>t("div",{class:"flex align-items-center justify-content-center"},[t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}}),t("span",null,"هل أنت متأكد من حذف هذه الجهة؟")],-1)),Ke={setup(x){const c=le(),k=s(!0),I=s(""),B=s(null),h=s(!1),f=s(!1),g=s(!1);s(null);const N=s(null),P=s({}),C=s(""),d=s(""),M=s(null),n=s(1),$=s(0),b=s(10),v=s(0),R=s(0),F=s(0),G=()=>{N.value.exportCSV()},H=o=>{I.value=o,h.value=!0},L=()=>{T.delete(`/api/authority/${I.value}`).then(()=>{m(),h.value=!1,c.add({severity:"success",summary:"نجاح",detail:"تم الحذف بنجاح",life:3e3})}).catch(o=>{c.add({severity:"error",summary:"خطأ",detail:"حدث خطأ أثناء الحذف",life:3e3})})},O=()=>{d.value="",f.value=!0},Q=(o,a)=>{M.value=o,d.value=a,g.value=!0},q=()=>{if(!d.value.trim()){c.add({severity:"warn",summary:"تحذير",detail:"الاسم مطلوب",life:3e3});return}T.post("/api/authority",{name:d.value}).then(()=>{m(),f.value=!1,c.add({severity:"success",summary:"نجاح",detail:"تم الإنشاء بنجاح",life:3e3})}).catch(o=>{c.add({severity:"error",summary:"خطأ",detail:"حدث خطأ أثناء الإنشاء",life:3e3})})},J=()=>{if(!d.value.trim()){c.add({severity:"warn",summary:"تحذير",detail:"الاسم مطلوب",life:3e3});return}T.put(`/api/authority/${M.value}`,{name:d.value}).then(()=>{m(),g.value=!1,c.add({severity:"success",summary:"نجاح",detail:"تم التحديث بنجاح",life:3e3})}).catch(o=>{c.add({severity:"error",summary:"خطأ",detail:"حدث خطأ أثناء التحديث",life:3e3})})},K=()=>{P.value={global:{value:null,matchMode:ce.CONTAINS}}};oe(()=>{K()});const m=()=>{k.value=!0,T.get("/api/authority",{params:{page:n.value,limit:b.value,search:C.value}}).then(o=>{k.value=!1,B.value=o.data.data,$.value=o.data.pagination.total,v.value=o.data.pagination.last_page,R.value=o.data.pagination.from,F.value=o.data.pagination.to}).catch(o=>{k.value=!1,c.add({severity:"error",summary:"خطأ",detail:"حدث خطأ أثناء تحميل البيانات",life:3e3}),console.error("Error fetching data:",o)})};se(C,()=>{n.value=1,m()});const y=o=>{o>=1&&o<=v.value&&(n.value=o,m())},W=o=>{b.value=o,n.value=1,m()};return ie(()=>{m()}),(o,a)=>{const S=p("InputText"),r=p("Button"),X=p("Toolbar"),Y=p("Toast"),w=p("Column"),Z=p("ProgressSpinner"),ee=p("DataTable"),te=p("Dropdown"),U=p("Dialog"),z=ne("tooltip");return V(),D("div",_e,[t("div",he,[t("div",fe,[l(X,{class:"mb-4"},{start:i(()=>[ge]),end:i(()=>[t("div",be,[t("span",ye,[xe,l(S,{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=e=>C.value=e),placeholder:"بحث"},null,8,["modelValue"])]),l(r,{label:"إضافة جهة",icon:"pi pi-plus",class:"p-button-success",onClick:O}),l(r,{label:"تصدير",icon:"pi pi-upload",class:"p-button-help",onClick:G})])]),_:1}),l(Y),t("div",ke,[l(ee,{ref_key:"dt",ref:N,value:B.value,loading:k.value,"data-key":"id",paginator:!1,rows:b.value,filters:P.value,totalRecords:$.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:i(()=>[Ce]),loading:i(()=>[t("div",we,[l(Z,{style:{width:"50px",height:"50px"}})])]),default:i(()=>[l(w,{"selection-mode":"multiple","header-style":"width: 3rem"}),l(w,{field:"id",header:"رقم",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:i(e=>[A(_(e.data.id),1)]),_:1}),l(w,{field:"name",header:"الاسم",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:i(e=>[A(_(e.data.name),1)]),_:1}),l(w,{header:"إجراءات","header-style":"min-width:12rem;"},{body:i(e=>[E(l(r,{icon:"pi pi-pencil",class:"p-detail mx-2",onClick:j=>Q(e.data.id,e.data.name)},null,8,["onClick"]),[[z,"تعديل",void 0,{top:!0}]]),E(l(r,{icon:"pi pi-trash",class:"p-delete",onClick:j=>H(e.data.id)},null,8,["onClick"]),[[z,"حذف",void 0,{top:!0}]])]),_:1})]),_:1},8,["value","loading","rows","filters","totalRecords"]),v.value>0?(V(),D("div",Ve,[t("div",De,[t("span",Te," عرض "+_(R.value)+" إلى "+_(F.value)+" من "+_($.value)+" مدخلات ",1)]),t("div",$e,[t("span",Se,[t("button",{class:"p-paginator-first p-paginator-element p-link",disabled:n.value===1,onClick:a[1]||(a[1]=e=>y(1))},Be,8,Ue),t("button",{class:"p-paginator-prev p-link p-paginator-element",disabled:n.value===1,onClick:a[2]||(a[2]=e=>y(n.value-1))},Me,8,Ne),(V(!0),D(de,null,re(v.value,e=>(V(),D("button",{key:e,class:pe(["p-paginator-page p-paginator-element p-link",{"p-highlight":n.value===e}]),onClick:j=>y(e)},_(e),11,Re))),128)),t("button",{class:"p-paginator-next p-paginator-element p-link",disabled:n.value===v.value,onClick:a[3]||(a[3]=e=>y(n.value+1))},je,8,Fe),t("button",{class:"p-paginator-last p-paginator-element p-link",disabled:n.value===v.value,onClick:a[4]||(a[4]=e=>y(v.value))},Ge,8,Ae)]),t("span",He,[l(te,{modelValue:b.value,"onUpdate:modelValue":a[5]||(a[5]=e=>b.value=e),options:[5,10,20,30],onChange:W,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):ue("",!0),l(U,{visible:f.value,"onUpdate:visible":a[8]||(a[8]=e=>f.value=e),style:{width:"450px"},header:"إضافة جهة جديدة",modal:!0},{footer:i(()=>[l(r,{label:"إلغاء",icon:"pi pi-times",class:"p-button-text",onClick:a[7]||(a[7]=e=>f.value=!1)}),l(r,{label:"حفظ",icon:"pi pi-check",class:"p-button-success",onClick:q})]),default:i(()=>[t("div",Le,[Oe,l(S,{id:"authority-name",modelValue:d.value,"onUpdate:modelValue":a[6]||(a[6]=e=>d.value=e),class:"w-full mt-2",placeholder:"أدخل اسم الجهة"},null,8,["modelValue"])])]),_:1},8,["visible"]),l(U,{visible:g.value,"onUpdate:visible":a[11]||(a[11]=e=>g.value=e),style:{width:"450px"},header:"تحديث الجهة",modal:!0},{footer:i(()=>[l(r,{label:"إلغاء",icon:"pi pi-times",class:"p-button-text",onClick:a[10]||(a[10]=e=>g.value=!1)}),l(r,{label:"حفظ",icon:"pi pi-check",class:"p-button-success",onClick:J})]),default:i(()=>[t("div",Qe,[qe,l(S,{id:"authority-name-update",modelValue:d.value,"onUpdate:modelValue":a[9]||(a[9]=e=>d.value=e),class:"w-full mt-2",placeholder:"أدخل اسم الجهة"},null,8,["modelValue"])])]),_:1},8,["visible"]),l(U,{visible:h.value,"onUpdate:visible":a[13]||(a[13]=e=>h.value=e),style:{width:"450px"},header:"تأكيد الحذف",modal:!0},{footer:i(()=>[l(r,{label:"لا",icon:"pi pi-times",class:"p-button-text",onClick:a[12]||(a[12]=e=>h.value=!1)}),l(r,{label:"نعم",icon:"pi pi-check",class:"p-button-danger",onClick:L})]),default:i(()=>[Je]),_:1},8,["visible"])])])])])}}},Xe=ae(Ke,[["__scopeId","data-v-9019a866"]]);export{Xe as default};

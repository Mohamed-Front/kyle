import{_ as oe,N as se,R as le,u as ne,r as i,U as ie,S as de,o as re,g as u,H as ce,a as S,c as $,d as a,b as l,w as r,t as d,j as o,F as ue,B as pe,i as ve,V as he,e as I,A as g,I as _e,z as me,p as be,f as ge}from"./index-5ffc309d.js";const m=x=>(be("data-v-89ad4d31"),x=x(),ge(),x),fe={class:"grid"},ye={class:"col-12"},we={class:"card p-4 shadow-2 border-round"},xe={class:"text-2xl font-bold"},Ce={class:"flex gap-2"},ke={class:"p-input-icon-left"},Ve=m(()=>a("i",{class:"pi pi-search"},null,-1)),Te={class:"card shadow-1 surface-0"},De={class:"text-center py-4"},Se=m(()=>a("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),$e={class:"text-xl"},Ie={class:"flex justify-content-center align-items-center py-4"},Re={key:0,class:"p-paginator p-component p-unselectable-text mt-3"},Ne={class:"p-paginator-left-content"},Ue={class:"p-paginator-current"},Be={class:"p-paginator-right-content"},Ee={class:"p-paginator-pages"},Pe=["disabled"],Me=m(()=>a("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)),ze=[Me],Fe=["disabled"],je=m(()=>a("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)),Ae=[je],Le=["onClick"],Oe=["disabled"],qe=m(()=>a("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)),Ge=[qe],He=["disabled"],Qe=m(()=>a("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)),We=[Qe],Je={class:"p-paginator-rpp-options"},Ke={class:"flex align-items-center justify-content-center"},Xe=m(()=>a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),Ye={class:"field"},Ze={for:"notes"},et={setup(x){const{t:e}=se(),j=le(),v=ne(),C=i(!0),A=i(""),U=i(null),k=i(!1),V=i(!1);i(null);const B=i(null),E=i({}),T=i(""),D=i(""),L=i(null),c=i(1),R=i(0),f=i(10),h=i(0),P=i(0),M=i(0),O=i([{label:"انتظار",value:2},{label:"نشط",value:1},{label:"غير نشط",value:3}]),q=()=>{B.value.exportCSV()},G=()=>{I.delete(`/api/contact-us/${A.value}`).then(()=>{_(),k.value=!1,v.add({severity:"success",summary:e("نجاح"),detail:e("تم تغيير الحاله بنجاح"),life:3e3})}).catch(n=>{v.add({severity:"error",summary:e("خطأ"),detail:e("contact.deleteError"),life:3e3})})},H=()=>{if(!D.value.trim()){v.add({severity:"warn",summary:e("تحذير"),detail:e("contact.notesRequired"),life:3e3});return}I.post(`/api/contact-us/add/notes/${L.value}`,{notes:D.value}).then(()=>{_(),V.value=!1,v.add({severity:"success",summary:e("نجاح"),detail:e("contact.notesSuccess"),life:3e3})}).catch(n=>{v.add({severity:"error",summary:e("خطأ"),detail:e("contact.notesError"),life:3e3})})},Q=(n,s)=>{I.post(`/api/contact-us/change/status/${n}`,{status:s}).then(()=>{_(),v.add({severity:"success",summary:e("نجاح"),detail:e("تم تغيير الحاله بنجاح"),life:3e3})}).catch(N=>{v.add({severity:"error",summary:e("خطأ"),detail:e("contact.updateError"),life:3e3}),console.error("Error updating status:",N)})},W=()=>{E.value={global:{value:null,matchMode:he.CONTAINS}}};ie(()=>{W()});const _=()=>{C.value=!0,I.get("/api/contact-us",{params:{page:c.value,limit:f.value,search:T.value}}).then(n=>{C.value=!1,U.value=n.data.data,R.value=n.data.pagination.total,h.value=n.data.pagination.last_page,P.value=n.data.pagination.from,M.value=n.data.pagination.to}).catch(n=>{C.value=!1,v.add({severity:"error",summary:e("خطأ"),detail:e("contact.loadError"),life:3e3}),console.error("Error fetching data:",n)})};de(T,()=>{c.value=1,_()});const y=n=>{n>=1&&n<=h.value&&(c.value=n,_())},J=n=>{f.value=n,c.value=1,_()};re(()=>{_()});const K=n=>{j.push({name:"contact_show",params:{id:n}})};return(n,s)=>{const N=u("InputText"),b=u("Button"),X=u("Toolbar"),Y=u("Toast"),p=u("Column"),z=u("Dropdown"),Z=u("ProgressSpinner"),ee=u("DataTable"),F=u("Dialog"),te=u("Textarea"),ae=ce("tooltip");return S(),$("div",fe,[a("div",ye,[a("div",we,[l(X,{class:"mb-4"},{start:r(()=>[a("h2",xe,d(o(e)("اتصل بنا")),1)]),end:r(()=>[a("div",Ce,[a("span",ke,[Ve,l(N,{modelValue:T.value,"onUpdate:modelValue":s[0]||(s[0]=t=>T.value=t),placeholder:o(e)("بحث")},null,8,["modelValue","placeholder"])]),l(b,{label:o(e)("تصدير"),icon:"pi pi-upload",class:"p-export",onClick:q},null,8,["label"])])]),_:1}),l(Y),a("div",Te,[l(ee,{ref_key:"dt",ref:B,value:U.value,loading:C.value,"data-key":"id",paginator:!1,rows:f.value,filters:E.value,totalRecords:R.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:r(()=>[a("div",De,[Se,a("p",$e,d(o(e)("لا توجد بيانات")),1)])]),loading:r(()=>[a("div",Ie,[l(Z,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:r(()=>[l(p,{"selection-mode":"multiple","header-style":"width: 3rem"}),l(p,{field:"id",header:o(e)("رقم"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:r(t=>[g(d(t.data.id),1)]),_:1},8,["header"]),l(p,{field:"name",header:o(e)("اسم"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:r(t=>[g(d(t.data.name),1)]),_:1},8,["header"]),l(p,{field:"email",header:o(e)("بريد إلكتروني"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:r(t=>[g(d(t.data.email),1)]),_:1},8,["header"]),l(p,{field:"type",header:o(e)("نوع"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:r(t=>[g(d(t.data.type),1)]),_:1},8,["header"]),l(p,{field:"date",header:o(e)("تاريخ"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:r(t=>[g(d(t.data.date),1)]),_:1},8,["header"]),l(p,{field:"status_description",header:o(e)("وصف الحالة"),sortable:!0,"header-style":"width:20%; min-width:15rem;"},{body:r(t=>[g(d(t.data.status_description||"-"),1)]),_:1},8,["header"]),l(p,{field:"status",header:o(e)("حالة"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:r(t=>[l(z,{modelValue:t.data.status,"onUpdate:modelValue":w=>t.data.status=w,options:O.value,optionLabel:"label",optionValue:"value",placeholder:o(e)("اختر الحالة"),class:"w-full",onChange:w=>Q(t.data.id,w.value)},null,8,["modelValue","onUpdate:modelValue","options","placeholder","onChange"])]),_:1},8,["header"]),l(p,{header:o(e)("إجراءات"),"header-style":"min-width:12rem;"},{body:r(t=>[_e(l(b,{icon:"pi pi-pencil",class:"p-detail",onClick:w=>K(t.data.id)},null,8,["onClick"]),[[ae,o(e)("تعديل"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"]),h.value>0?(S(),$("div",Re,[a("div",Ne,[a("span",Ue,d(o(e)("عرض"))+" "+d(P.value)+" "+d(o(e)("إلى"))+" "+d(M.value)+" "+d(o(e)("من"))+" "+d(R.value)+" "+d(o(e)("مدخلات")),1)]),a("div",Be,[a("span",Ee,[a("button",{class:"p-paginator-first p-paginator-element p-link",disabled:c.value===1,onClick:s[1]||(s[1]=t=>y(1))},ze,8,Pe),a("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:c.value===1,onClick:s[2]||(s[2]=t=>y(c.value-1))},Ae,8,Fe),(S(!0),$(ue,null,pe(h.value,t=>(S(),$("button",{key:t,class:me(["p-paginator-page p-paginator-element p-link",{"p-highlight":c.value===t}]),onClick:w=>y(t)},d(t),11,Le))),128)),a("button",{class:"p-paginator-next p-paginator-element p-link",disabled:c.value===h.value,onClick:s[3]||(s[3]=t=>y(c.value+1))},Ge,8,Oe),a("button",{class:"p-paginator-last p-paginator-element p-link",disabled:c.value===h.value,onClick:s[4]||(s[4]=t=>y(h.value))},We,8,He)]),a("span",Je,[l(z,{modelValue:f.value,"onUpdate:modelValue":s[5]||(s[5]=t=>f.value=t),options:[5,10,20,30],onChange:s[6]||(s[6]=t=>J(t.value)),class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):ve("",!0)]),l(F,{visible:k.value,"onUpdate:visible":s[8]||(s[8]=t=>k.value=t),style:{width:"450px"},header:o(e)("تأكيد الحذف"),modal:!0},{footer:r(()=>[l(b,{label:o(e)("لا"),icon:"pi pi-times",class:"p-button-text",onClick:s[7]||(s[7]=t=>k.value=!1)},null,8,["label"]),l(b,{label:o(e)("نعم"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:G},null,8,["label"])]),default:r(()=>[a("div",Ke,[Xe,a("span",null,d(o(e)("هل أنت متأكد من حذف هذا الاتصال؟")),1)])]),_:1},8,["visible","header"]),l(F,{visible:V.value,"onUpdate:visible":s[11]||(s[11]=t=>V.value=t),style:{width:"450px"},header:o(e)("إضافة ملاحظات"),modal:!0},{footer:r(()=>[l(b,{label:o(e)("إلغاء"),icon:"pi pi-times",class:"p-button-text",onClick:s[10]||(s[10]=t=>V.value=!1)},null,8,["label"]),l(b,{label:o(e)("حفظ"),icon:"pi pi-check",class:"p-button-text p-button-success",onClick:H},null,8,["label"])]),default:r(()=>[a("div",Ye,[a("label",Ze,d(o(e)("ملاحظات")),1),l(te,{id:"notes",modelValue:D.value,"onUpdate:modelValue":s[9]||(s[9]=t=>D.value=t),autoResize:!0,rows:"5",class:"w-full mt-2",placeholder:o(e)("أدخل ملاحظاتك هنا")},null,8,["modelValue","placeholder"])])]),_:1},8,["visible","header"])])])])}}},at=oe(et,[["__scopeId","data-v-89ad4d31"]]);export{at as default};

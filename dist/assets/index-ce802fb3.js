import{_ as j,k as D,l as B,M as N,i as n,w as T,j as E,p as I,o as b,c as f,a as o,h as a,q as r,g as t,s as M,v as q,E as m,x as S,y as U,z,A,B as d,b as F,t as g,D as $,I as G}from"./index-dab9be7b.js";const K={class:"grid",dir:"rtl"},O={class:"col-12"},Q={class:"card p-4 shadow-2 border-round"},H={class:"flex gap-3 align-items-center"},J={class:"p-input-icon-left"},W=["src"],X={key:1,class:"w-16 h-16 bg-gray-200 border-2 border-dashed rounded-lg flex items-center justify-center mx-auto"},Y={class:"text-success"},Z={class:"line-clamp-2 text-sm text-gray-700"},ee={class:"flex gap-2 justify-content-center"},te={class:"text-center py-12 text-gray-500"},se={class:"flex flex-column align-items-center py-12"},oe={__name:"index",setup(ae){const _=D(),C=B(),v=N(),x=n(!0),h=n([]),p=n(""),w=n(null),u=n(1),c=n(10),P=n(0),R=n(1),y=async()=>{x.value=!0;try{const e=(await M.get("/api/product",{params:{page:u.value,limit:c.value,search:p.value}})).data;if(e.success){h.value=e.data||[];const i=e.pagination||{};P.value=i.total||0,R.value=i.last_page||1,u.value=i.current_page||1,c.value=i.per_page||10}}catch(l){_.add({severity:"error",summary:"خطأ",detail:"فشل تحميل المنتجات",life:4e3}),console.error("Error fetching products:",l)}finally{x.value=!1}},k=l=>{if(!l||l.length===0)return null;const e=l.find(i=>i.name==="product_image");return(e==null?void 0:e.url)||null};T([p,c],()=>{u.value=1,y()});const L=l=>{u.value=l.page+1,c.value=l.rows,y()};return E(()=>{y()}),(l,e)=>{const i=I("tooltip");return b(),f("div",K,[o("div",O,[o("div",Q,[a(t(S),{class:"mb-4"},{start:r(()=>[...e[5]||(e[5]=[o("h2",{class:"text-2xl font-bold text-primary"},"إدارة المنتجات",-1)])]),end:r(()=>[o("div",H,[o("span",J,[e[6]||(e[6]=o("i",{class:"pi pi-search"},null,-1)),a(t(q),{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=s=>p.value=s),placeholder:"البحث بالاسم أو الرقم التسلسلي...",class:"w-full md:w-20rem"},null,8,["modelValue"])]),a(t(m),{label:"إضافة منتج جديد",icon:"pi pi-plus",class:"p-button-success",onClick:e[1]||(e[1]=s=>t(v).push({name:"products-create"}))})])]),_:1}),a(t(U),{position:"top-right"}),a(t(z)),a(t(G),{value:h.value,loading:x.value,dataKey:"id",selection:w.value,"onUpdate:selection":e[4]||(e[4]=s=>w.value=s),responsiveLayout:"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm",paginator:!0,rows:c.value,totalRecords:P.value,rowsPerPageOptions:[5,10,20,50,100],paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"عرض {first} إلى {last} من إجمالي {totalRecords} منتج",onPage:L,dir:"rtl"},{empty:r(()=>[o("div",te,[e[8]||(e[8]=o("i",{class:"pi pi-box text-6xl mb-4 text-gray-300"},null,-1)),e[9]||(e[9]=o("p",{class:"text-2xl font-bold"},"لا توجد منتجات حاليًا",-1)),e[10]||(e[10]=o("p",{class:"text-lg mt-2"},"ابدأ بإضافة أول منتج في متجرك",-1)),a(t(m),{label:"إضافة منتج جديد",icon:"pi pi-plus",class:"mt-4 p-button-success",onClick:e[3]||(e[3]=s=>t(v).push({name:"product-create"}))})])]),loading:r(()=>[o("div",se,[a(t(A),{style:{width:"60px",height:"60px"}}),e[11]||(e[11]=o("p",{class:"mt-4 text-xl font-medium text-gray-600"},"جاري تحميل المنتجات...",-1))])]),default:r(()=>[a(t(d),{selectionMode:"multiple",headerStyle:"width: 3rem"}),a(t(d),{field:"id",header:"المعرف",sortable:"",style:{"min-width":"4rem"}},{body:r(({data:s})=>[F(" #"+g(s.id),1)]),_:1}),a(t(d),{header:"الصورة",style:{"min-width":"8rem","text-align":"center"}},{body:r(({data:s})=>[k(s.media)?(b(),f("img",{key:0,src:k(s.media),alt:"صورة المنتج",class:"w-16 h-16 object-cover rounded-lg shadow-md border border-gray-200"},null,8,W)):(b(),f("div",X,[...e[7]||(e[7]=[o("i",{class:"pi pi-image text-gray-400 text-2xl"},null,-1)])]))]),_:1}),a(t(d),{field:"name",header:"اسم المنتج",sortable:"",style:{"min-width":"14rem"}},{body:r(({data:s})=>[o("strong",null,g(s.name),1)]),_:1}),a(t(d),{field:"price",header:"السعر",sortable:"",style:{"min-width":"8rem"}},{body:r(({data:s})=>[o("strong",Y,g(s.price),1)]),_:1}),a(t(d),{header:"الوصف",style:{"min-width":"16rem"}},{body:r(({data:s})=>[o("div",Z,g(s.description||"لا يوجد وصف"),1)]),_:1}),a(t(d),{header:"الإجراءات",style:{"min-width":"12rem","text-align":"center"}},{body:r(({data:s})=>[o("div",ee,[$(a(t(m),{icon:"pi pi-pencil",class:"p-button-rounded p-button-warning p-button-text p-button-sm",onClick:V=>t(v).push({name:"products-edit",params:{id:s.id}})},null,8,["onClick"]),[[i,"تعديل",void 0,{top:!0}]]),$(a(t(m),{icon:"pi pi-trash",class:"p-button-rounded p-button-danger p-button-text p-button-sm",onClick:e[2]||(e[2]=V=>t(C).require({message:"هل أنت متأكد من حذف هذا المنتج نهائيًا؟",header:"تأكيد الحذف",icon:"pi pi-exclamation-triangle",acceptLabel:"نعم، احذف",rejectLabel:"إلغاء",accept:()=>{t(_).add({severity:"info",summary:"قريبًا",detail:"خاصية الحذف قيد التطوير",life:3e3})}}))},null,512),[[i,"حذف",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","loading","selection","rows","totalRecords"])])])])}}},le=j(oe,[["__scopeId","data-v-5f3db2e9"]]);export{le as default};

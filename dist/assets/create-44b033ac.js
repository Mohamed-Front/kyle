import{_ as N,O as U,v as $,i as n,o as g,c as x,a as t,P as i,b as d,h as r,g as s,p as j,F as z,A as D,Q as B,J as f,C as I,s as R}from"./index-063be7f6.js";const A={class:"max-w-4xl mx-auto p-6",dir:"rtl"},G={class:"bg-white rounded-2xl shadow-2xl overflow-hidden"},J={class:"p-8"},L={key:0,class:"space-y-6"},O=["src"],S={class:"flex justify-center gap-4"},W={class:"cursor-pointer"},E={key:1,class:"space-y-5"},M={class:"flex justify-center gap-6 pt-12"},Q={__name:"create",setup(H){const _=U(),o=$(),u=n(""),y=n(""),p=n(""),c=n(null),m=n(null),v=n(!1),b=n(!1),V=l=>{l.preventDefault(),v.value=!0},k=()=>{v.value=!1},C=l=>{l.preventDefault(),v.value=!1;const e=l.dataTransfer.files[0];e&&e.type.startsWith("image/")?h(e):o.add({severity:"warn",summary:"ملف غير صالح",detail:"يرجى رفع صورة فقط",life:3e3})},w=l=>{const e=l.target.files[0];e&&h(e)},h=l=>{if(l.size>5*1024*1024){o.add({severity:"warn",summary:"حجم كبير جدًا",detail:"يجب ألا يتجاوز حجم الصورة 5 ميجابايت",life:4e3});return}c.value=l;const e=new FileReader;e.onload=a=>{m.value=a.target.result},e.readAsDataURL(l)},F=()=>{c.value=null,m.value=null;const l=document.querySelector('input[type="file"]');l&&(l.value="")},P=async()=>{var e,a;if(!u.value.trim()){o.add({severity:"error",summary:"حقل مطلوب",detail:"العنوان مطلوب",life:3e3});return}if(!p.value.trim()){o.add({severity:"error",summary:"حقل مطلوب",detail:"الوصف مطلوب",life:3e3});return}if(!c.value){o.add({severity:"error",summary:"حقل مطلوب",detail:"يرجى رفع صورة البانر",life:3e3});return}b.value=!0;const l=new FormData;l.append("title",u.value),l.append("subtitle",y.value||""),l.append("description",p.value),l.append("banner_image",c.value);try{await R.post("/api/banner",l,{headers:{"Content-Type":"multipart/form-data"}}),o.add({severity:"success",summary:"تم بنجاح!",detail:"تم إنشاء البانر بنجاح",life:4e3}),setTimeout(()=>{_.push({name:"banners"})},1500)}catch(T){const q=((a=(e=T.response)==null?void 0:e.data)==null?void 0:a.message)||"فشل إنشاء البانر";o.add({severity:"error",summary:"خطأ",detail:q,life:5e3})}finally{b.value=!1}};return(l,e)=>(g(),x(z,null,[t("div",A,[t("div",G,[e[9]||(e[9]=t("div",{class:"bg-gradient-to-l from-[#2c3e50] to-[#1a2530] px-8 py-7"},[t("h1",{class:"text-3xl font-bold text-white text-center"}," إضافة بانر ترويجي جديد "),t("p",{class:"text-center text-white/80 mt-2 text-lg"},"أنشئ بانر جذاب للصفحة الرئيسية")],-1)),t("div",J,[t("form",{onSubmit:i(P,["prevent"]),class:"space-y-8"},[t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-bold text-gray-700 mb-2"},[d(" العنوان "),t("span",{class:"text-red-500"},"*")],-1)),r(s(D),{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),placeholder:"مثال: تخفيضات الصيف الكبرى 2025",class:"w-full text-lg py-3",required:""},null,8,["modelValue"])]),t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-bold text-gray-700 mb-2"},[d(" العنوان الفرعي "),t("small",{class:"text-gray-500 font-normal"},"(اختياري)")],-1)),r(s(D),{modelValue:y.value,"onUpdate:modelValue":e[1]||(e[1]=a=>y.value=a),placeholder:"مثال: خصم يصل إلى 70% على كل شيء!",class:"w-full py-3"},null,8,["modelValue"])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-bold text-gray-700 mb-2"},[d(" الوصف "),t("span",{class:"text-red-500"},"*")],-1)),r(s(B),{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=a=>p.value=a),rows:"6",placeholder:"اكتب وصفًا جذابًا للعرض الترويجي...",class:"w-full",required:""},null,8,["modelValue"])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-bold text-gray-700 mb-3"},[d(" صورة البانر "),t("span",{class:"text-red-500"},"*")],-1)),t("div",{onDragover:i(V,["prevent"]),onDragleave:i(k,["prevent"]),onDrop:i(C,["prevent"]),class:j(["relative border-3 border-dashed rounded-2xl p-12 text-center cursor-pointer transition-all duration-300 shadow-sm",v.value?"border-blue-500 bg-blue-50/50":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"])},[t("input",{type:"file",accept:"image/*",onChange:w,class:"absolute inset-0 opacity-0 cursor-pointer z-10",required:""},null,32),m.value?(g(),x("div",L,[t("img",{src:m.value,alt:"معاينة البانر",class:"mx-auto max-h-96 rounded-xl shadow-2xl object-cover border-4 border-white"},null,8,O),t("div",S,[r(s(f),{type:"button",label:"إزالة الصورة",icon:"pi pi-trash",severity:"danger",outlined:"",onClick:i(F,["stop"])}),t("label",W,[r(s(f),{label:"تغيير الصورة",icon:"pi pi-camera",outlined:""}),t("input",{type:"file",accept:"image/*",onChange:w,class:"hidden"},null,32)])])])):(g(),x("div",E,[...e[7]||(e[7]=[t("i",{class:"pi pi-image text-7xl text-gray-400"},null,-1),t("div",null,[t("p",{class:"text-xl font-bold text-gray-700"},[t("span",{class:"text-blue-600 font-extrabold"},"اضغط للرفع"),d(" أو اسحب وأفلت الصورة هنا ")]),t("p",{class:"text-sm text-gray-500 mt-2"}," المقاس الموصى به: 1920×600 بكسل • صيغ PNG، JPG، WebP • الحد الأقصى 5 ميجابايت ")],-1)])]))],34)]),t("div",M,[r(s(f),{type:"button",label:"إلغاء",icon:"pi pi-times",severity:"secondary",outlined:"",onClick:e[3]||(e[3]=a=>s(_).back()),disabled:b.value,class:"px-10 py-3 text-lg"},null,8,["disabled"]),r(s(f),{type:"submit",label:"إنشاء البانر",icon:"pi pi-plus",loading:b.value,class:"px-12 py-3 text-lg font-bold"},null,8,["loading"])])],32)])])]),r(s(I),{position:"top-right"})],64))}},X=N(Q,[["__scopeId","data-v-6e8b7fa1"]]);export{X as default};

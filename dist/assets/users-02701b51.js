import{_ as ae,e as le,O as oe,v as ne,i,T as ie,x as re,j as de,N as p,y as E,o as c,c as m,a as s,h as n,z as d,I as w,K as F,t as r,g as o,F as j,l as z,q as ue,U as pe,s as O,b as $,p as ce}from"./index-b48caa78.js";const ve={class:"grid"},me={class:"col-12"},_e={class:"card p-4 shadow-2 border-round"},he={class:"text-2xl font-bold"},ge={class:"flex gap-2"},be={class:"p-input-icon-left"},fe={class:"card shadow-1 surface-0"},ye={key:0},xe={key:1},ke={class:"text-center py-4"},we={class:"text-xl"},Ce={class:"flex justify-content-center align-items-center py-4"},Te={key:0,class:"p-paginator p-component p-unselectable-text mt-3"},De={class:"p-paginator-left-content"},Ve={class:"p-paginator-current"},$e={class:"p-paginator-right-content"},Ne={class:"p-paginator-pages"},Be=["disabled"],Se=["disabled"],Ie=["onClick"],Me=["disabled"],Pe=["disabled"],Re={class:"p-paginator-rpp-options"},Ue={class:"flex align-items-center justify-content-center"},Ee={__name:"users",setup(Fe){const{t:a}=le(),N=oe(),D=ne(),C=i(!0),B=i(""),S=i(null),g=i(!1);i(null);const I=i(null),M=i({}),T=i(""),u=i(1),V=i(0),b=i(10),v=i(0),P=i(0),R=i(0),q=()=>{I.value.exportCSV()},A=l=>{B.value=l,g.value=!0},G=()=>{O.delete(`/api/user/${B.value}`).then(()=>{f(),g.value=!1,D.add({severity:"success",summary:a("success"),detail:a("user.deleteSuccess"),life:3e3})}).catch(l=>{D.add({severity:"error",summary:a("error"),detail:a("user.deleteError"),life:3e3})})},K=()=>{M.value={global:{value:null,matchMode:pe.CONTAINS}}};ie(()=>{K()});const f=()=>{C.value=!0,O.get("/api/user",{params:{page:u.value,limit:b.value,search:T.value}}).then(l=>{C.value=!1,S.value=l.data.data,V.value=l.data.pagination.total,v.value=l.data.pagination.last_page,P.value=l.data.pagination.from,R.value=l.data.pagination.to}).catch(l=>{C.value=!1,D.add({severity:"error",summary:a("error"),detail:a("user.loadError"),life:3e3}),console.error("Error fetching data:",l)})};re(T,l=>{u.value=1,f()});const y=l=>{l>=1&&l<=v.value&&(u.value=l,f())},L=l=>{b.value=l,u.value=1,f()};de(()=>{f()});const Q=()=>{N.push({name:"user-create"})},W=l=>{N.push({name:"user-edit",params:{id:l}})};return(l,e)=>{const H=p("InputText"),_=p("Button"),J=p("Toolbar"),X=p("Toast"),h=p("Column"),Y=p("Chip"),Z=p("ProgressSpinner"),ee=p("DataTable"),te=p("Dropdown"),se=p("Dialog"),x=E("can"),U=E("tooltip");return c(),m("div",ve,[s("div",me,[s("div",_e,[n(J,{class:"mb-4"},{start:d(()=>[s("h2",he,r(o(a)("user.users")),1)]),end:d(()=>[s("div",ge,[s("span",be,[e[8]||(e[8]=s("i",{class:"pi pi-search"},null,-1)),n(H,{modelValue:T.value,"onUpdate:modelValue":e[0]||(e[0]=t=>T.value=t),placeholder:o(a)("user.search")},null,8,["modelValue","placeholder"])]),w(n(_,{label:o(a)("user.export"),icon:"pi pi-upload",class:"p-export",onClick:q},null,8,["label"]),[[x,"export users"]]),w(n(_,{label:o(a)("user.new"),icon:"pi pi-plus",class:"p-button-success",onClick:Q},null,8,["label"]),[[x,"create users"]])])]),_:1}),n(X),s("div",fe,[w((c(),F(ee,{ref_key:"dt",ref:I,value:S.value,loading:C.value,"data-key":"id",paginator:!1,rows:b.value,filters:M.value,totalRecords:V.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[s("div",ke,[e[9]||(e[9]=s("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),s("p",we,r(o(a)("user.noData")),1)])]),loading:d(()=>[s("div",Ce,[n(Z,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[n(h,{"selection-mode":"multiple","header-style":"width: 3rem"}),n(h,{field:"name",header:o(a)("user.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(t=>[$(r(t.data.name),1)]),_:1},8,["header"]),n(h,{field:"email",header:o(a)("user.email"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(t=>[$(r(t.data.email),1)]),_:1},8,["header"]),n(h,{field:"phone",header:o(a)("user.phone"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(t=>[$(r(t.data.phone),1)]),_:1},8,["header"]),n(h,{field:"roles",header:o(a)("user.roles"),"header-style":"width:20%; min-width:15rem;"},{body:d(t=>[t.data.roles&&t.data.roles.length?(c(),m("div",ye,[(c(!0),m(j,null,z(t.data.roles,k=>(c(),F(Y,{key:k.id,label:k.name,class:"mr-2 mb-2"},null,8,["label"]))),128))])):(c(),m("span",xe,"-"))]),_:1},8,["header"]),n(h,{header:o(a)("actions"),"header-style":"min-width:10rem;"},{body:d(t=>[w(n(_,{icon:"pi pi-pencil",class:"p-detail",onClick:k=>W(t.data.id)},null,8,["onClick"]),[[x,"edit users"],[U,o(a)("edit"),void 0,{top:!0}]]),w(n(_,{icon:"pi pi-trash mx-2",class:"p-delete",onClick:k=>A(t.data.id)},null,8,["onClick"]),[[x,"delete users"],[U,o(a)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[x,"list users"]]),v.value>0?(c(),m("div",Te,[s("div",De,[s("span",Ve,r(o(a)("showing"))+" "+r(P.value)+" "+r(o(a)("to"))+" "+r(R.value)+" "+r(o(a)("of"))+" "+r(V.value)+" "+r(o(a)("entries")),1)]),s("div",$e,[s("span",Ne,[s("button",{class:"p-paginator-first p-paginator-element p-link",disabled:u.value===1,onClick:e[1]||(e[1]=t=>y(1))},[...e[10]||(e[10]=[s("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,Be),s("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:u.value===1,onClick:e[2]||(e[2]=t=>y(u.value-1))},[...e[11]||(e[11]=[s("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,Se),(c(!0),m(j,null,z(v.value,t=>(c(),m("button",{key:t,class:ce(["p-paginator-page p-paginator-element p-link",{"p-highlight":u.value===t}]),onClick:k=>y(t)},r(t),11,Ie))),128)),s("button",{class:"p-paginator-next p-paginator-element p-link",disabled:u.value===v.value,onClick:e[3]||(e[3]=t=>y(u.value+1))},[...e[12]||(e[12]=[s("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,Me),s("button",{class:"p-paginator-last p-paginator-element p-link",disabled:u.value===v.value,onClick:e[4]||(e[4]=t=>y(v.value))},[...e[13]||(e[13]=[s("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,Pe)]),s("span",Re,[n(te,{modelValue:b.value,"onUpdate:modelValue":e[5]||(e[5]=t=>b.value=t),options:[5,10,20,30],onChange:L,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):ue("",!0)]),n(se,{visible:g.value,"onUpdate:visible":e[7]||(e[7]=t=>g.value=t),style:{width:"450px"},header:o(a)("user.deleteConfirmTitle"),modal:!0},{footer:d(()=>[n(_,{label:o(a)("no"),icon:"pi pi-times",class:"p-button-text",onClick:e[6]||(e[6]=t=>g.value=!1)},null,8,["label"]),n(_,{label:o(a)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:G},null,8,["label"])]),default:d(()=>[s("div",Ue,[e[14]||(e[14]=s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),s("span",null,r(o(a)("user.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},ze=ae(Ee,[["__scopeId","data-v-5a687b54"]]);export{ze as default};

import{_ as Q,v as W,O as X,e as Y,i as c,j as Z,N as m,y as ee,o as r,c as n,I as se,a as s,t as a,h as i,z as T,P as h,F as oe,s as B,b as g,q as v,p as te}from"./index-b48caa78.js";const ae={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},le={class:"text-3xl font-bold text-center mb-8 text-gray-800"},re={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ne={class:"space-y-2"},de={for:"name",class:"block text-sm font-medium text-gray-700"},ue={key:0,class:"text-red-500 text-xs"},ie={class:"space-y-2"},ce={for:"phone",class:"block text-sm font-medium text-gray-700"},pe={key:0,class:"text-red-500 text-xs"},me={class:"space-y-2"},ge={for:"role",class:"block text-sm font-medium text-gray-700"},_e={key:0,class:"text-red-500 text-xs"},ve={class:"space-y-2"},fe={for:"email",class:"block text-sm font-medium text-gray-700"},be={key:0,class:"text-red-500 text-xs"},xe={class:"space-y-2"},ye={for:"password",class:"block text-sm font-medium text-gray-700"},he={key:0,class:"text-red-500 text-xs"},we={class:"md:col-span-2 space-y-2 hidden"},ke={class:"block text-sm font-medium text-gray-700"},Ve={class:"flex justify-center"},De={key:0,class:"p-4"},$e={class:"relative group"},Ue=["src"],Ie={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},Fe={class:"opacity-0 group-hover:opacity-100 space-x-3 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0"},Ce={class:"mt-2 text-center text-sm text-gray-500"},je={key:1,class:"p-8 flex flex-col items-center justify-center"},Ne={class:"text-sm text-center text-gray-600 mb-1"},Pe={class:"text-blue-500 font-medium"},Te={class:"pt-4 flex justify-center"},Be={key:0},Ge={key:1,class:"pi pi-spinner pi-spin"},Me={__name:"create",setup(Re){const G=W(),M=X(),{t:R}=Y(),l=c(),p=c(!1),w=c([]),f=c(null),b=c(null),_=c(!1),t=c({name:"",phone:"",role_id:null,email:"",password:""}),E=async()=>{try{const o=await B.get("api/role");w.value=o.data.data}catch(o){console.error("Error fetching roles:",o)}},L=o=>{o.preventDefault(),_.value=!0},S=()=>{_.value=!1},z=o=>{f.value=o;const e=new FileReader;e.onload=u=>{b.value=u.target.result},e.readAsDataURL(o),_.value=!1},k=o=>{var u,x,y;const e=((u=o.target.files)==null?void 0:u[0])||((y=(x=o.dataTransfer)==null?void 0:x.files)==null?void 0:y[0]);e&&e.type.match("image.*")&&z(e)},O=()=>{f.value=null,b.value=null},q=async()=>{p.value=!0;const o=new FormData;o.append("name",t.value.name),o.append("phone",t.value.phone),o.append("type",t.value.type),o.append("role_id",t.value.role_id),o.append("email",t.value.email),o.append("password",t.value.password),f.value&&o.append("image",f.value),B.post("/api/user",o).then(e=>{M.push({name:"users"}),p.value=!1}).catch(e=>{console.error("Error:",e),G.add({severity:"error",summary:R("error"),detail:e.response.data.message,life:3e3}),p.value=!1})};return Z(()=>{E()}),(o,e)=>{const u=m("InputText"),x=m("Dropdown"),y=m("Password"),A=m("Button"),J=m("Form"),H=m("Toast"),K=ee("can");return r(),n(oe,null,[se((r(),n("div",ae,[s("h1",le,a(o.$t("user.create_New_User")),1),i(J,{ref_key:"form",ref:l,model:t.value,rules:o.rules,onSubmit:h(q,["prevent"]),class:"space-y-6"},{default:T(()=>{var V,D,$,U,I,F,C,j,N,P;return[s("div",re,[s("div",ne,[s("label",de,[g(a(o.$t("user.name"))+" ",1),e[5]||(e[5]=s("span",{class:"text-red-500"},"*",-1))]),i(u,{id:"name",modelValue:t.value.name,"onUpdate:modelValue":e[0]||(e[0]=d=>t.value.name=d),placeholder:o.$t("user.enter_full_name"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue","placeholder"]),(D=(V=l.value)==null?void 0:V.errors)!=null&&D.name?(r(),n("small",ue,a(l.value.errors.name[0].message),1)):v("",!0)]),s("div",ie,[s("label",ce,[g(a(o.$t("user.phone"))+" ",1),e[6]||(e[6]=s("span",{class:"text-red-500"},"*",-1))]),i(u,{id:"phone",modelValue:t.value.phone,"onUpdate:modelValue":e[1]||(e[1]=d=>t.value.phone=d),placeholder:"+1 (___) ___-____",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(U=($=l.value)==null?void 0:$.errors)!=null&&U.phone?(r(),n("small",pe,a(l.value.errors.phone[0].message),1)):v("",!0)]),s("div",me,[s("label",ge,[g(a(o.$t("user.role"))+" ",1),e[7]||(e[7]=s("span",{class:"text-red-500"},"*",-1))]),i(x,{id:"role",modelValue:t.value.role_id,"onUpdate:modelValue":e[2]||(e[2]=d=>t.value.role_id=d),options:w.value,optionLabel:"name",optionValue:"id",placeholder:o.$t("user.select_role"),class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue","options","placeholder"]),(F=(I=l.value)==null?void 0:I.errors)!=null&&F.role_id?(r(),n("small",_e,a(l.value.errors.role_id[0].message),1)):v("",!0)]),s("div",ve,[s("label",fe,[g(a(o.$t("user.email"))+" ",1),e[8]||(e[8]=s("span",{class:"text-red-500"},"*",-1))]),i(u,{id:"email",modelValue:t.value.email,"onUpdate:modelValue":e[3]||(e[3]=d=>t.value.email=d),type:"email",placeholder:"user@example.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(j=(C=l.value)==null?void 0:C.errors)!=null&&j.email?(r(),n("small",be,a(l.value.errors.email[0].message),1)):v("",!0)]),s("div",xe,[s("label",ye,[g(a(o.$t("user.password"))+" ",1),e[9]||(e[9]=s("span",{class:"text-red-500"},"*",-1))]),i(y,{id:"password",modelValue:t.value.password,"onUpdate:modelValue":e[4]||(e[4]=d=>t.value.password=d),placeholder:"••••••••",toggleMask:"",feedback:!1,inputClass:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",class:"w-full"},null,8,["modelValue"]),(P=(N=l.value)==null?void 0:N.errors)!=null&&P.password?(r(),n("small",he,a(l.value.errors.password[0].message),1)):v("",!0)]),s("div",we,[s("label",ke,a(o.$t("user.profile_Image")),1),s("div",Ve,[s("label",{onDragover:h(L,["prevent"]),onDragleave:S,onDrop:h(k,["prevent"]),class:te([{"border-blue-500 bg-blue-50":_.value,"border-gray-300":!_.value},"cursor-pointer w-full max-w-md rounded-xl border-2 border-dashed transition-colors duration-300"])},[s("input",{type:"file",onChange:k,accept:"image/*",class:"hidden"},null,32),b.value?(r(),n("div",De,[s("div",$e,[s("img",{src:b.value,alt:"Preview",class:"w-full h-64 object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,Ue),s("div",Ie,[s("div",Fe,[s("button",{type:"button",onClick:h(O,["stop"]),class:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},[...e[10]||(e[10]=[s("i",{class:"pi pi-trash text-sm"},null,-1)])]),e[11]||(e[11]=s("button",{type:"button",class:"bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition"},[s("i",{class:"pi pi-pencil text-sm"})],-1))])])]),s("p",Ce,a(o.$t("user.click_or_drag_to_change_photo")),1)])):(r(),n("div",je,[e[12]||(e[12]=s("div",{class:"bg-blue-100 p-4 rounded-full mb-4"},[s("i",{class:"pi pi-image text-blue-500 text-2xl"})],-1)),s("p",Ne,[s("span",Pe,a(o.$t("user.click_to_upload")),1),g(" "+a(o.$t("user.or_drag_and_drop")),1)]),e[13]||(e[13]=s("p",{class:"text-xs text-gray-400"},"SVG, PNG, JPG or GIF (max. 1MB)",-1))]))],34)])])]),s("div",Te,[i(A,{type:"submit",label:"Create User",icon:"pi pi-user-plus",loading:p.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:p.value},{default:T(()=>[p.value?(r(),n("i",Ge)):(r(),n("span",Be,a(o.$t("user.create_User")),1))]),_:1},8,["loading","disabled"])])]}),_:1},8,["model","rules"])])),[[K,"create users"]]),i(H)],64)}}},Le=Q(Me,[["__scopeId","data-v-8d95932a"]]);export{Le as default};

import{_ as X,u as Y,R as Z,N as ee,r as p,o as se,g as _,H as oe,a as r,c as n,I as te,d as e,t as a,b as c,w as P,l as k,F as ae,e as R,A as g,i as h,z as le,p as re,f as ne}from"./index-5ffc309d.js";const i=f=>(re("data-v-ea10611a"),f=f(),ne(),f),de={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},ie={class:"text-3xl font-bold text-center mb-8 text-gray-800"},ue={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ce={class:"space-y-2"},pe={for:"name",class:"block text-sm font-medium text-gray-700"},me=i(()=>e("span",{class:"text-red-500"},"*",-1)),_e={key:0,class:"text-red-500 text-xs"},ge={class:"space-y-2"},ve={for:"phone",class:"block text-sm font-medium text-gray-700"},he=i(()=>e("span",{class:"text-red-500"},"*",-1)),fe={key:0,class:"text-red-500 text-xs"},be={class:"space-y-2"},xe={for:"role",class:"block text-sm font-medium text-gray-700"},ye=i(()=>e("span",{class:"text-red-500"},"*",-1)),we={key:0,class:"text-red-500 text-xs"},ke={class:"space-y-2"},Ve={for:"email",class:"block text-sm font-medium text-gray-700"},De=i(()=>e("span",{class:"text-red-500"},"*",-1)),Ie={key:0,class:"text-red-500 text-xs"},$e={class:"space-y-2"},Ue={for:"password",class:"block text-sm font-medium text-gray-700"},Ce=i(()=>e("span",{class:"text-red-500"},"*",-1)),Fe={key:0,class:"text-red-500 text-xs"},Ne={class:"md:col-span-2 space-y-2 hidden"},Se={class:"block text-sm font-medium text-gray-700"},Te={class:"flex justify-center"},je=["onDragover","onDrop"],Be={key:0,class:"p-4"},Pe={class:"relative group"},Re=["src"],Ge={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},Me={class:"opacity-0 group-hover:opacity-100 space-x-3 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0"},Ee=["onClick"],Le=i(()=>e("i",{class:"pi pi-trash text-sm"},null,-1)),ze=[Le],Ae=i(()=>e("button",{type:"button",class:"bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition"},[e("i",{class:"pi pi-pencil text-sm"})],-1)),He={class:"mt-2 text-center text-sm text-gray-500"},Je={key:1,class:"p-8 flex flex-col items-center justify-center"},Oe=i(()=>e("div",{class:"bg-blue-100 p-4 rounded-full mb-4"},[e("i",{class:"pi pi-image text-blue-500 text-2xl"})],-1)),qe={class:"text-sm text-center text-gray-600 mb-1"},Ke={class:"text-blue-500 font-medium"},Qe=i(()=>e("p",{class:"text-xs text-gray-400"},"SVG, PNG, JPG or GIF (max. 1MB)",-1)),We={class:"pt-4 flex justify-center"},Xe={key:0},Ye={key:1,class:"pi pi-spinner pi-spin"},Ze={setup(f){const G=Y(),M=Z(),{t:E}=ee(),l=p(),m=p(!1),V=p([]),b=p(null),x=p(null),v=p(!1),t=p({name:"",phone:"",role_id:null,email:"",password:""}),L=async()=>{try{const s=await R.get("api/role");V.value=s.data.data}catch(s){console.error("Error fetching roles:",s)}},z=s=>{s.preventDefault(),v.value=!0},A=()=>{v.value=!1},H=s=>{b.value=s;const o=new FileReader;o.onload=u=>{x.value=u.target.result},o.readAsDataURL(s),v.value=!1},D=s=>{var u,y,w;const o=((u=s.target.files)==null?void 0:u[0])||((w=(y=s.dataTransfer)==null?void 0:y.files)==null?void 0:w[0]);o&&o.type.match("image.*")&&H(o)},J=()=>{b.value=null,x.value=null},O=async()=>{m.value=!0;const s=new FormData;s.append("name",t.value.name),s.append("phone",t.value.phone),s.append("type",t.value.type),s.append("role_id",t.value.role_id),s.append("email",t.value.email),s.append("password",t.value.password),b.value&&s.append("image",b.value),R.post("/api/user",s).then(o=>{M.push({name:"users"}),m.value=!1}).catch(o=>{console.error("Error:",o),G.add({severity:"error",summary:E("error"),detail:o.response.data.message,life:3e3}),m.value=!1})};return se(()=>{L()}),(s,o)=>{const u=_("InputText"),y=_("Dropdown"),w=_("Password"),q=_("Button"),K=_("Form"),Q=_("Toast"),W=oe("can");return r(),n(ae,null,[te((r(),n("div",de,[e("h1",ie,a(s.$t("user.create_New_User")),1),c(K,{ref_key:"form",ref:l,model:t.value,rules:s.rules,onSubmit:k(O,["prevent"]),class:"space-y-6"},{default:P(()=>{var I,$,U,C,F,N,S,T,j,B;return[e("div",ue,[e("div",ce,[e("label",pe,[g(a(s.$t("user.name"))+" ",1),me]),c(u,{id:"name",modelValue:t.value.name,"onUpdate:modelValue":o[0]||(o[0]=d=>t.value.name=d),placeholder:s.$t("user.enter_full_name"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue","placeholder"]),($=(I=l.value)==null?void 0:I.errors)!=null&&$.name?(r(),n("small",_e,a(l.value.errors.name[0].message),1)):h("",!0)]),e("div",ge,[e("label",ve,[g(a(s.$t("user.phone"))+" ",1),he]),c(u,{id:"phone",modelValue:t.value.phone,"onUpdate:modelValue":o[1]||(o[1]=d=>t.value.phone=d),placeholder:"+1 (___) ___-____",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(C=(U=l.value)==null?void 0:U.errors)!=null&&C.phone?(r(),n("small",fe,a(l.value.errors.phone[0].message),1)):h("",!0)]),e("div",be,[e("label",xe,[g(a(s.$t("user.role"))+" ",1),ye]),c(y,{id:"role",modelValue:t.value.role_id,"onUpdate:modelValue":o[2]||(o[2]=d=>t.value.role_id=d),options:V.value,optionLabel:"name",optionValue:"id",placeholder:s.$t("user.select_role"),class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue","options","placeholder"]),(N=(F=l.value)==null?void 0:F.errors)!=null&&N.role_id?(r(),n("small",we,a(l.value.errors.role_id[0].message),1)):h("",!0)]),e("div",ke,[e("label",Ve,[g(a(s.$t("user.email"))+" ",1),De]),c(u,{id:"email",modelValue:t.value.email,"onUpdate:modelValue":o[3]||(o[3]=d=>t.value.email=d),type:"email",placeholder:"user@example.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(T=(S=l.value)==null?void 0:S.errors)!=null&&T.email?(r(),n("small",Ie,a(l.value.errors.email[0].message),1)):h("",!0)]),e("div",$e,[e("label",Ue,[g(a(s.$t("user.password"))+" ",1),Ce]),c(w,{id:"password",modelValue:t.value.password,"onUpdate:modelValue":o[4]||(o[4]=d=>t.value.password=d),placeholder:"••••••••",toggleMask:"",feedback:!1,inputClass:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",class:"w-full"},null,8,["modelValue"]),(B=(j=l.value)==null?void 0:j.errors)!=null&&B.password?(r(),n("small",Fe,a(l.value.errors.password[0].message),1)):h("",!0)]),e("div",Ne,[e("label",Se,a(s.$t("user.profile_Image")),1),e("div",Te,[e("label",{onDragover:k(z,["prevent"]),onDragleave:A,onDrop:k(D,["prevent"]),class:le([{"border-blue-500 bg-blue-50":v.value,"border-gray-300":!v.value},"cursor-pointer w-full max-w-md rounded-xl border-2 border-dashed transition-colors duration-300"])},[e("input",{type:"file",onChange:D,accept:"image/*",class:"hidden"},null,32),x.value?(r(),n("div",Be,[e("div",Pe,[e("img",{src:x.value,alt:"Preview",class:"w-full h-64 object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,Re),e("div",Ge,[e("div",Me,[e("button",{type:"button",onClick:k(J,["stop"]),class:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},ze,8,Ee),Ae])])]),e("p",He,a(s.$t("user.click_or_drag_to_change_photo")),1)])):(r(),n("div",Je,[Oe,e("p",qe,[e("span",Ke,a(s.$t("user.click_to_upload")),1),g(" "+a(s.$t("user.or_drag_and_drop")),1)]),Qe]))],42,je)])])]),e("div",We,[c(q,{type:"submit",label:"Create User",icon:"pi pi-user-plus",loading:m.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:m.value},{default:P(()=>[m.value?(r(),n("i",Ye)):(r(),n("span",Xe,a(s.$t("user.create_User")),1))]),_:1},8,["loading","disabled"])])]}),_:1},8,["model","rules","onSubmit"])])),[[W,"create users"]]),c(Q)],64)}}},ss=X(Ze,[["__scopeId","data-v-ea10611a"]]);export{ss as default};

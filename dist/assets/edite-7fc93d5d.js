import{_ as Q,u as W,R as X,N as Y,r as p,o as Z,g as h,H as ee,a as r,c as n,I as te,d as t,t as a,b as m,w as N,l as w,F as se,e as V,A as f,i as k,z as oe,p as ae,f as le}from"./index-5ffc309d.js";const i=b=>(ae("data-v-820882d6"),b=b(),le(),b),re={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},ne={class:"text-3xl font-bold text-center mb-8 text-gray-800"},de={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ie={class:"space-y-2"},ue={for:"name",class:"block text-sm font-medium text-gray-700"},ce=i(()=>t("span",{class:"text-red-500"},"*",-1)),pe={key:0,class:"text-red-500 text-xs"},me={class:"space-y-2"},_e={for:"phone",class:"block text-sm font-medium text-gray-700"},ve=i(()=>t("span",{class:"text-red-500"},"*",-1)),ge={key:0,class:"text-red-500 text-xs"},he={class:"space-y-2"},fe={for:"role",class:"block text-sm font-medium text-gray-700"},be=i(()=>t("span",{class:"text-red-500"},"*",-1)),ye={key:0,class:"text-red-500 text-xs"},xe={class:"space-y-2"},we={for:"email",class:"block text-sm font-medium text-gray-700"},ke=i(()=>t("span",{class:"text-red-500"},"*",-1)),De={key:0,class:"text-red-500 text-xs"},Ve={class:"md:col-span-2 space-y-2 hidden"},$e={class:"block text-sm font-medium text-gray-700"},Ie={class:"flex justify-center"},Ue=["onDragover","onDrop"],Fe={key:0,class:"p-4"},Re={class:"relative group"},Ce=["src"],Se={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},Te={class:"opacity-0 group-hover:opacity-100 space-x-3 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0"},je=["onClick"],Be=i(()=>t("i",{class:"pi pi-trash text-sm"},null,-1)),Ne=[Be],Ge=i(()=>t("button",{type:"button",class:"bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition"},[t("i",{class:"pi pi-pencil text-sm"})],-1)),Pe={class:"mt-2 text-center text-sm text-gray-500"},Ee={key:1,class:"p-8 flex flex-col items-center justify-center"},Le=i(()=>t("div",{class:"bg-blue-100 p-4 rounded-full mb-4"},[t("i",{class:"pi pi-image text-blue-500 text-2xl"})],-1)),Me={class:"text-sm text-center text-gray-600 mb-1"},ze={class:"text-blue-500 font-medium"},Ae=i(()=>t("p",{class:"text-xs text-gray-400"},"SVG, PNG, JPG or GIF (max. 1MB)",-1)),He={class:"pt-4 flex justify-center"},Je={key:0},Oe={key:1,class:"pi pi-spinner pi-spin"},qe={setup(b){const G=W(),D=X(),{t:P}=Y(),d=p(),_=p(!1),$=p([]),y=p(null),v=p(null),g=p(!1),o=p({name:"",phone:"",type:null,role_id:null,email:""}),E=async()=>{try{const e=await V.get("api/role");$.value=e.data.data,A()}catch(e){console.error("Error fetching roles:",e)}},L=e=>{e.preventDefault(),g.value=!0},M=()=>{g.value=!1},z=e=>{y.value=e;const s=new FileReader;s.onload=l=>{v.value=l.target.result},s.readAsDataURL(e),g.value=!1},I=e=>{var l,u,x;const s=((l=e.target.files)==null?void 0:l[0])||((x=(u=e.dataTransfer)==null?void 0:u.files)==null?void 0:x[0]);s&&s.type.match("image.*")&&z(s)},A=()=>{V.get(`api/user/${D.currentRoute._value.params.id}`).then(e=>{var s,l,u;o.value.name=e.data.data.name,o.value.email=e.data.data.email,o.value.type=e.data.data.type,o.value.phone=e.data.data.phone,o.value.role_id=e.data.data.roles[0].id,v.value=(u=(l=(s=e.data)==null?void 0:s.data)==null?void 0:l.media[0])==null?void 0:u.url})},H=()=>{y.value=null,v.value=null},J=async()=>{_.value=!0;const e=new FormData;e.append("name",o.value.name),e.append("phone",o.value.phone),e.append("type",o.value.type),e.append("role_id",o.value.role_id),e.append("email",o.value.email),y.value&&e.append("image",y.value),V.post(`/api/user/${D.currentRoute._value.params.id}`,e).then(s=>{D.push({name:"users"})}).catch(s=>{console.error("Error:",s),G.add({severity:"error",summary:P("error"),detail:s.response.data.message,life:3e3}),_.value=!1})};return Z(()=>{E()}),(e,s)=>{const l=h("InputText"),u=h("Dropdown"),x=h("Button"),O=h("Form"),q=h("Toast"),K=ee("can");return r(),n(se,null,[te((r(),n("div",re,[t("h1",ne,a(e.$t("user.edit_User")),1),m(O,{ref_key:"form",ref:d,model:o.value,rules:e.rules,onSubmit:w(J,["prevent"]),class:"space-y-6"},{default:N(()=>{var U,F,R,C,S,T,j,B;return[t("div",de,[t("div",ie,[t("label",ue,[f(a(e.$t("user.name"))+" ",1),ce]),m(l,{id:"name",modelValue:o.value.name,"onUpdate:modelValue":s[0]||(s[0]=c=>o.value.name=c),placeholder:e.$t("user.enter_full_name"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue","placeholder"]),(F=(U=d.value)==null?void 0:U.errors)!=null&&F.name?(r(),n("small",pe,a(d.value.errors.name[0].message),1)):k("",!0)]),t("div",me,[t("label",_e,[f(a(e.$t("user.phone"))+" ",1),ve]),m(l,{id:"phone",modelValue:o.value.phone,"onUpdate:modelValue":s[1]||(s[1]=c=>o.value.phone=c),placeholder:"+1 (___) ___-____",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(C=(R=d.value)==null?void 0:R.errors)!=null&&C.phone?(r(),n("small",ge,a(d.value.errors.phone[0].message),1)):k("",!0)]),t("div",he,[t("label",fe,[f(a(e.$t("user.role"))+" ",1),be]),m(u,{id:"role",modelValue:o.value.role_id,"onUpdate:modelValue":s[2]||(s[2]=c=>o.value.role_id=c),options:$.value,optionLabel:"name",optionValue:"id",placeholder:e.$t("user.select_role"),class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue","options","placeholder"]),(T=(S=d.value)==null?void 0:S.errors)!=null&&T.role_id?(r(),n("small",ye,a(d.value.errors.role_id[0].message),1)):k("",!0)]),t("div",xe,[t("label",we,[f(a(e.$t("user.email"))+" ",1),ke]),m(l,{id:"email",modelValue:o.value.email,"onUpdate:modelValue":s[3]||(s[3]=c=>o.value.email=c),type:"email",placeholder:"user@example.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(B=(j=d.value)==null?void 0:j.errors)!=null&&B.email?(r(),n("small",De,a(d.value.errors.email[0].message),1)):k("",!0)]),t("div",Ve,[t("label",$e,a(e.$t("user.profile_Image")),1),t("div",Ie,[t("label",{onDragover:w(L,["prevent"]),onDragleave:M,onDrop:w(I,["prevent"]),class:oe([{"border-blue-500 bg-blue-50":g.value,"border-gray-300":!g.value},"cursor-pointer w-full max-w-md rounded-xl border-2 border-dashed transition-colors duration-300"])},[t("input",{type:"file",onChange:I,accept:"image/*",class:"hidden"},null,32),v.value?(r(),n("div",Fe,[t("div",Re,[t("img",{src:v.value,alt:"Preview",class:"w-full h-64 object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,Ce),t("div",Se,[t("div",Te,[t("button",{type:"button",onClick:w(H,["stop"]),class:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},Ne,8,je),Ge])])]),t("p",Pe,a(e.$t("user.click_or_drag_to_change_photo")),1)])):(r(),n("div",Ee,[Le,t("p",Me,[t("span",ze,a(e.$t("user.click_to_upload")),1),f(" "+a(e.$t("user.or_drag_and_drop")),1)]),Ae]))],42,Ue)])])]),t("div",He,[m(x,{type:"submit",label:"Update User",icon:"pi pi-user-plus",loading:_.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:_.value},{default:N(()=>[_.value?(r(),n("i",Oe)):(r(),n("span",Je,a(e.$t("user.update_User")),1))]),_:1},8,["loading","disabled"])])]}),_:1},8,["model","rules","onSubmit"])])),[[K,"edit users"]]),m(q)],64)}}},Qe=Q(qe,[["__scopeId","data-v-820882d6"]]);export{Qe as default};

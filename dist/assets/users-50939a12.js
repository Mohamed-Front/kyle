import{_ as le,N as ne,R as ie,u as re,r as i,U as de,S as ce,o as ue,g as u,H as j,a as p,c as h,d as t,b as l,w as d,I as C,h as z,t as r,j as o,F as A,B as G,i as pe,V as _e,e as H,A as $,z as he,p as ve,f as me}from"./index-5ffc309d.js";const v=V=>(ve("data-v-5a687b54"),V=V(),me(),V),ge={class:"grid"},be={class:"col-12"},fe={class:"card p-4 shadow-2 border-round"},ye={class:"text-2xl font-bold"},xe={class:"flex gap-2"},we={class:"p-input-icon-left"},ke=v(()=>t("i",{class:"pi pi-search"},null,-1)),Ce={class:"card shadow-1 surface-0"},Ve={key:0},De={key:1},Te={class:"text-center py-4"},Se=v(()=>t("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),Ie={class:"text-xl"},$e={class:"flex justify-content-center align-items-center py-4"},Be={key:0,class:"p-paginator p-component p-unselectable-text mt-3"},Ne={class:"p-paginator-left-content"},Re={class:"p-paginator-current"},Me={class:"p-paginator-right-content"},Pe={class:"p-paginator-pages"},Ue=["disabled"],Ee=v(()=>t("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)),Fe=[Ee],je=["disabled"],ze=v(()=>t("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)),Ae=[ze],Ge=["onClick"],He=["disabled"],Le=v(()=>t("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)),Oe=[Le],Qe=["disabled"],We=v(()=>t("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)),qe=[We],Je={class:"p-paginator-rpp-options"},Ke={class:"flex align-items-center justify-content-center"},Xe=v(()=>t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),Ye={setup(V){const{t:s}=ne(),B=ie(),S=re(),D=i(!0),N=i(""),R=i(null),b=i(!1);i(null);const M=i(null),P=i({}),T=i(""),c=i(1),I=i(0),f=i(10),_=i(0),U=i(0),E=i(0),L=()=>{M.value.exportCSV()},O=a=>{N.value=a,b.value=!0},Q=()=>{H.delete(`/api/user/${N.value}`).then(()=>{y(),b.value=!1,S.add({severity:"success",summary:s("success"),detail:s("user.deleteSuccess"),life:3e3})}).catch(a=>{S.add({severity:"error",summary:s("error"),detail:s("user.deleteError"),life:3e3})})},W=()=>{P.value={global:{value:null,matchMode:_e.CONTAINS}}};de(()=>{W()});const y=()=>{D.value=!0,H.get("/api/user",{params:{page:c.value,limit:f.value,search:T.value}}).then(a=>{D.value=!1,R.value=a.data.data,I.value=a.data.pagination.total,_.value=a.data.pagination.last_page,U.value=a.data.pagination.from,E.value=a.data.pagination.to}).catch(a=>{D.value=!1,S.add({severity:"error",summary:s("error"),detail:s("user.loadError"),life:3e3}),console.error("Error fetching data:",a)})};ce(T,a=>{c.value=1,y()});const x=a=>{a>=1&&a<=_.value&&(c.value=a,y())},q=a=>{f.value=a,c.value=1,y()};ue(()=>{y()});const J=()=>{B.push({name:"user-create"})},K=a=>{B.push({name:"user-edit",params:{id:a}})};return(a,n)=>{const X=u("InputText"),m=u("Button"),Y=u("Toolbar"),Z=u("Toast"),g=u("Column"),ee=u("Chip"),te=u("ProgressSpinner"),se=u("DataTable"),ae=u("Dropdown"),oe=u("Dialog"),w=j("can"),F=j("tooltip");return p(),h("div",ge,[t("div",be,[t("div",fe,[l(Y,{class:"mb-4"},{start:d(()=>[t("h2",ye,r(o(s)("user.users")),1)]),end:d(()=>[t("div",xe,[t("span",we,[ke,l(X,{modelValue:T.value,"onUpdate:modelValue":n[0]||(n[0]=e=>T.value=e),placeholder:o(s)("user.search")},null,8,["modelValue","placeholder"])]),C(l(m,{label:o(s)("user.export"),icon:"pi pi-upload",class:"p-export",onClick:L},null,8,["label"]),[[w,"export users"]]),C(l(m,{label:o(s)("user.new"),icon:"pi pi-plus",class:"p-button-success",onClick:J},null,8,["label"]),[[w,"create users"]])])]),_:1}),l(Z),t("div",Ce,[C((p(),z(se,{ref_key:"dt",ref:M,value:R.value,loading:D.value,"data-key":"id",paginator:!1,rows:f.value,filters:P.value,totalRecords:I.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[t("div",Te,[Se,t("p",Ie,r(o(s)("user.noData")),1)])]),loading:d(()=>[t("div",$e,[l(te,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[l(g,{"selection-mode":"multiple","header-style":"width: 3rem"}),l(g,{field:"name",header:o(s)("user.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(e=>[$(r(e.data.name),1)]),_:1},8,["header"]),l(g,{field:"email",header:o(s)("user.email"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(e=>[$(r(e.data.email),1)]),_:1},8,["header"]),l(g,{field:"phone",header:o(s)("user.phone"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(e=>[$(r(e.data.phone),1)]),_:1},8,["header"]),l(g,{field:"roles",header:o(s)("user.roles"),"header-style":"width:20%; min-width:15rem;"},{body:d(e=>[e.data.roles&&e.data.roles.length?(p(),h("div",Ve,[(p(!0),h(A,null,G(e.data.roles,k=>(p(),z(ee,{key:k.id,label:k.name,class:"mr-2 mb-2"},null,8,["label"]))),128))])):(p(),h("span",De,"-"))]),_:1},8,["header"]),l(g,{header:o(s)("actions"),"header-style":"min-width:10rem;"},{body:d(e=>[C(l(m,{icon:"pi pi-pencil",class:"p-detail",onClick:k=>K(e.data.id)},null,8,["onClick"]),[[w,"edit users"],[F,o(s)("edit"),void 0,{top:!0}]]),C(l(m,{icon:"pi pi-trash mx-2",class:"p-delete",onClick:k=>O(e.data.id)},null,8,["onClick"]),[[w,"delete users"],[F,o(s)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[w,"list users"]]),_.value>0?(p(),h("div",Be,[t("div",Ne,[t("span",Re,r(o(s)("showing"))+" "+r(U.value)+" "+r(o(s)("to"))+" "+r(E.value)+" "+r(o(s)("of"))+" "+r(I.value)+" "+r(o(s)("entries")),1)]),t("div",Me,[t("span",Pe,[t("button",{class:"p-paginator-first p-paginator-element p-link",disabled:c.value===1,onClick:n[1]||(n[1]=e=>x(1))},Fe,8,Ue),t("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:c.value===1,onClick:n[2]||(n[2]=e=>x(c.value-1))},Ae,8,je),(p(!0),h(A,null,G(_.value,e=>(p(),h("button",{key:e,class:he(["p-paginator-page p-paginator-element p-link",{"p-highlight":c.value===e}]),onClick:k=>x(e)},r(e),11,Ge))),128)),t("button",{class:"p-paginator-next p-paginator-element p-link",disabled:c.value===_.value,onClick:n[3]||(n[3]=e=>x(c.value+1))},Oe,8,He),t("button",{class:"p-paginator-last p-paginator-element p-link",disabled:c.value===_.value,onClick:n[4]||(n[4]=e=>x(_.value))},qe,8,Qe)]),t("span",Je,[l(ae,{modelValue:f.value,"onUpdate:modelValue":n[5]||(n[5]=e=>f.value=e),options:[5,10,20,30],onChange:q,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):pe("",!0)]),l(oe,{visible:b.value,"onUpdate:visible":n[7]||(n[7]=e=>b.value=e),style:{width:"450px"},header:o(s)("user.deleteConfirmTitle"),modal:!0},{footer:d(()=>[l(m,{label:o(s)("no"),icon:"pi pi-times",class:"p-button-text",onClick:n[6]||(n[6]=e=>b.value=!1)},null,8,["label"]),l(m,{label:o(s)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Q},null,8,["label"])]),default:d(()=>[t("div",Ke,[Xe,t("span",null,r(o(s)("user.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},et=le(Ye,[["__scopeId","data-v-5a687b54"]]);export{et as default};

import{_ as H,v as K,O as Q,e as W,i as p,j as X,N as g,y as Y,o as r,c as n,I as Z,a as s,t as o,h as c,z as C,P as y,F as ee,s as k,b as f,q as x,p as te}from"./index-063be7f6.js";const se={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},ae={class:"text-3xl font-bold text-center mb-8 text-gray-800"},oe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},le={class:"space-y-2"},re={for:"name",class:"block text-sm font-medium text-gray-700"},ne={key:0,class:"text-red-500 text-xs"},de={class:"space-y-2"},ie={for:"phone",class:"block text-sm font-medium text-gray-700"},ue={key:0,class:"text-red-500 text-xs"},pe={class:"space-y-2"},ce={for:"role",class:"block text-sm font-medium text-gray-700"},me={key:0,class:"text-red-500 text-xs"},ve={class:"space-y-2"},_e={for:"email",class:"block text-sm font-medium text-gray-700"},ge={key:0,class:"text-red-500 text-xs"},fe={class:"md:col-span-2 space-y-2 hidden"},be={class:"block text-sm font-medium text-gray-700"},he={class:"flex justify-center"},ye={key:0,class:"p-4"},xe={class:"relative group"},we=["src"],ke={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},Ve={class:"opacity-0 group-hover:opacity-100 space-x-3 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0"},De={class:"mt-2 text-center text-sm text-gray-500"},$e={key:1,class:"p-8 flex flex-col items-center justify-center"},Ue={class:"text-sm text-center text-gray-600 mb-1"},Ie={class:"text-blue-500 font-medium"},Fe={class:"pt-4 flex justify-center"},je={key:0},Re={key:1,class:"pi pi-spinner pi-spin"},Te={__name:"edite",setup(Be){const N=K(),w=Q(),{t:P}=W(),d=p(),m=p(!1),V=p([]),b=p(null),v=p(null),_=p(!1),a=p({name:"",phone:"",type:null,role_id:null,email:""}),G=async()=>{try{const e=await k.get("api/role");V.value=e.data.data,S()}catch(e){console.error("Error fetching roles:",e)}},E=e=>{e.preventDefault(),_.value=!0},L=()=>{_.value=!1},M=e=>{b.value=e;const t=new FileReader;t.onload=l=>{v.value=l.target.result},t.readAsDataURL(e),_.value=!1},D=e=>{var l,i,h;const t=((l=e.target.files)==null?void 0:l[0])||((h=(i=e.dataTransfer)==null?void 0:i.files)==null?void 0:h[0]);t&&t.type.match("image.*")&&M(t)},S=()=>{k.get(`api/user/${w.currentRoute._value.params.id}`).then(e=>{var t,l,i;a.value.name=e.data.data.name,a.value.email=e.data.data.email,a.value.type=e.data.data.type,a.value.phone=e.data.data.phone,a.value.role_id=e.data.data.roles[0].id,v.value=(i=(l=(t=e.data)==null?void 0:t.data)==null?void 0:l.media[0])==null?void 0:i.url})},z=()=>{b.value=null,v.value=null},O=async()=>{m.value=!0;const e=new FormData;e.append("name",a.value.name),e.append("phone",a.value.phone),e.append("type",a.value.type),e.append("role_id",a.value.role_id),e.append("email",a.value.email),b.value&&e.append("image",b.value),k.post(`/api/user/${w.currentRoute._value.params.id}`,e).then(t=>{w.push({name:"users"})}).catch(t=>{console.error("Error:",t),N.add({severity:"error",summary:P("error"),detail:t.response.data.message,life:3e3}),m.value=!1})};return X(()=>{G()}),(e,t)=>{const l=g("InputText"),i=g("Dropdown"),h=g("Button"),q=g("Form"),A=g("Toast"),J=Y("can");return r(),n(ee,null,[Z((r(),n("div",se,[s("h1",ae,o(e.$t("user.edit_User")),1),c(q,{ref_key:"form",ref:d,model:a.value,rules:e.rules,onSubmit:y(O,["prevent"]),class:"space-y-6"},{default:C(()=>{var $,U,I,F,j,R,T,B;return[s("div",oe,[s("div",le,[s("label",re,[f(o(e.$t("user.name"))+" ",1),t[4]||(t[4]=s("span",{class:"text-red-500"},"*",-1))]),c(l,{id:"name",modelValue:a.value.name,"onUpdate:modelValue":t[0]||(t[0]=u=>a.value.name=u),placeholder:e.$t("user.enter_full_name"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue","placeholder"]),(U=($=d.value)==null?void 0:$.errors)!=null&&U.name?(r(),n("small",ne,o(d.value.errors.name[0].message),1)):x("",!0)]),s("div",de,[s("label",ie,[f(o(e.$t("user.phone"))+" ",1),t[5]||(t[5]=s("span",{class:"text-red-500"},"*",-1))]),c(l,{id:"phone",modelValue:a.value.phone,"onUpdate:modelValue":t[1]||(t[1]=u=>a.value.phone=u),placeholder:"+1 (___) ___-____",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(F=(I=d.value)==null?void 0:I.errors)!=null&&F.phone?(r(),n("small",ue,o(d.value.errors.phone[0].message),1)):x("",!0)]),s("div",pe,[s("label",ce,[f(o(e.$t("user.role"))+" ",1),t[6]||(t[6]=s("span",{class:"text-red-500"},"*",-1))]),c(i,{id:"role",modelValue:a.value.role_id,"onUpdate:modelValue":t[2]||(t[2]=u=>a.value.role_id=u),options:V.value,optionLabel:"name",optionValue:"id",placeholder:e.$t("user.select_role"),class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue","options","placeholder"]),(R=(j=d.value)==null?void 0:j.errors)!=null&&R.role_id?(r(),n("small",me,o(d.value.errors.role_id[0].message),1)):x("",!0)]),s("div",ve,[s("label",_e,[f(o(e.$t("user.email"))+" ",1),t[7]||(t[7]=s("span",{class:"text-red-500"},"*",-1))]),c(l,{id:"email",modelValue:a.value.email,"onUpdate:modelValue":t[3]||(t[3]=u=>a.value.email=u),type:"email",placeholder:"user@example.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(B=(T=d.value)==null?void 0:T.errors)!=null&&B.email?(r(),n("small",ge,o(d.value.errors.email[0].message),1)):x("",!0)]),s("div",fe,[s("label",be,o(e.$t("user.profile_Image")),1),s("div",he,[s("label",{onDragover:y(E,["prevent"]),onDragleave:L,onDrop:y(D,["prevent"]),class:te([{"border-blue-500 bg-blue-50":_.value,"border-gray-300":!_.value},"cursor-pointer w-full max-w-md rounded-xl border-2 border-dashed transition-colors duration-300"])},[s("input",{type:"file",onChange:D,accept:"image/*",class:"hidden"},null,32),v.value?(r(),n("div",ye,[s("div",xe,[s("img",{src:v.value,alt:"Preview",class:"w-full h-64 object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,we),s("div",ke,[s("div",Ve,[s("button",{type:"button",onClick:y(z,["stop"]),class:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},[...t[8]||(t[8]=[s("i",{class:"pi pi-trash text-sm"},null,-1)])]),t[9]||(t[9]=s("button",{type:"button",class:"bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition"},[s("i",{class:"pi pi-pencil text-sm"})],-1))])])]),s("p",De,o(e.$t("user.click_or_drag_to_change_photo")),1)])):(r(),n("div",$e,[t[10]||(t[10]=s("div",{class:"bg-blue-100 p-4 rounded-full mb-4"},[s("i",{class:"pi pi-image text-blue-500 text-2xl"})],-1)),s("p",Ue,[s("span",Ie,o(e.$t("user.click_to_upload")),1),f(" "+o(e.$t("user.or_drag_and_drop")),1)]),t[11]||(t[11]=s("p",{class:"text-xs text-gray-400"},"SVG, PNG, JPG or GIF (max. 1MB)",-1))]))],34)])])]),s("div",Fe,[c(h,{type:"submit",label:"Update User",icon:"pi pi-user-plus",loading:m.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:m.value},{default:C(()=>[m.value?(r(),n("i",Re)):(r(),n("span",je,o(e.$t("user.update_User")),1))]),_:1},8,["loading","disabled"])])]}),_:1},8,["model","rules"])])),[[J,"edit users"]]),c(A)],64)}}},Ne=H(Te,[["__scopeId","data-v-3047b6de"]]);export{Ne as default};

import{_ as L,N as M,u as U,r as u,o as D,a as v,c as _,b as r,j as t,d as i,t as f,i as y,e as x,a0 as N,m as j,a1 as k,y as P}from"./index-5ffc309d.js";const R={class:"container mx-auto p-4",dir:"rtl"},B={key:0,class:"flex justify-center items-center h-64"},C={key:1,class:"card p-6 bg-white shadow-lg rounded-lg"},E={class:"text-2xl font-bold mb-6"},F={class:"mb-4"},O={class:"block text-sm font-medium text-gray-700 mb-1"},$={class:"mb-4"},z={class:"block text-sm font-medium text-gray-700 mb-1"},T={class:"grid lg:grid-cols-2 gap-2 grid-cols-1"},q={class:"mb-4"},A={class:"block text-sm font-medium text-gray-700 mb-1"},G={key:0,class:"mt-2"},H=["src"],J={class:"mb-4"},K={class:"block text-sm font-medium text-gray-700 mb-1"},Q={key:0,class:"mt-2"},W=["src"],X={setup(Y){const{t:a}=M(),c=U(),d=u(!0),n=u({id:null,official_email:"",phone:"",media:[]}),h=u(null),b=u(null),g=u(null),p=u(null),w=()=>{d.value=!0,x.get("/api/setting").then(s=>{if(s.data.success){n.value=s.data.data;const e=s.data.data.media.find(o=>o.name==="main_image"),l=s.data.data.media.find(o=>o.name==="map_image");g.value=(e==null?void 0:e.url)||null,p.value=(l==null?void 0:l.url)||null,c.add({severity:"success",summary:a("نجاح"),detail:a("contact.loadSuccess"),life:3e3})}d.value=!1}).catch(s=>{d.value=!1,c.add({severity:"error",summary:a("خطأ"),detail:a("contact.loadError"),life:3e3}),console.error("خطأ في جلب البيانات:",s)})},S=s=>{const e=s.files[0];e&&["image/jpeg","image/png","image/jpg","image/gif","image/svg+xml"].includes(e.type)?(h.value=e,g.value=URL.createObjectURL(e)):c.add({severity:"error",summary:a("خطأ"),detail:a("settings.invalidMainImage"),life:3e3})},V=s=>{const e=s.files[0];e&&["image/jpeg","image/png","image/jpg","image/gif","image/svg+xml"].includes(e.type)?(b.value=e,p.value=URL.createObjectURL(e)):c.add({severity:"error",summary:a("خطأ"),detail:a("settings.invalidMapImage"),life:3e3})},I=()=>{d.value=!0;const s=new FormData;s.append("official_email",n.value.official_email||""),s.append("phone",n.value.phone||""),h.value&&s.append("main_image",h.value,h.value.name),b.value?s.append("map_image",b.value,b.value.name):n.value.media.find(e=>e.name==="map_image"),x.post("/api/setting",s,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{if(e.data.success){n.value=e.data.data;const l=e.data.data.media.find(m=>m.name==="main_image"),o=e.data.data.media.find(m=>m.name==="map_image");g.value=(l==null?void 0:l.url)||null,p.value=(o==null?void 0:o.url)||null,c.add({severity:"success",summary:a("نجاح"),detail:a("contact.saveSuccess"),life:3e3})}d.value=!1}).catch(e=>{var o,m;d.value=!1;const l=(m=(o=e.response)==null?void 0:o.data)!=null&&m.errors?Object.values(e.response.data.errors).flat().join(" "):a("contact.saveError");c.add({severity:"error",summary:a("خطأ"),detail:l,life:5e3}),console.error("خطأ في حفظ الإعدادات:",e)})};return D(()=>{w()}),(s,e)=>(v(),_("div",R,[d.value?(v(),_("div",B,[r(t(N))])):(v(),_("div",C,[i("h1",E,f(t(a)("settings.title")),1),i("div",F,[i("label",O,f(t(a)("settings.email")),1),r(t(j),{modelValue:n.value.official_email,"onUpdate:modelValue":e[0]||(e[0]=l=>n.value.official_email=l),class:"w-full p-2 border rounded-md",placeholder:t(a)("settings.emailPlaceholder")},null,8,["modelValue","placeholder"])]),i("div",$,[i("label",z,f(t(a)("settings.phone")),1),r(t(j),{modelValue:n.value.phone,"onUpdate:modelValue":e[1]||(e[1]=l=>n.value.phone=l),class:"w-full p-2 border rounded-md",placeholder:t(a)("settings.phonePlaceholder")},null,8,["modelValue","placeholder"])]),i("div",T,[i("div",q,[i("label",A,f(t(a)("settings.mainImage")),1),r(t(k),{mode:"basic",accept:"image/jpeg,image/png,image/jpg,image/gif,image/svg+xml",maxFileSize:1e7,chooseLabel:"اختيار الصورة الرئيسية",class:"p-button-outlined p-button-rounded",onSelect:S}),g.value?(v(),_("div",G,[i("img",{src:g.value,alt:"معاينة الصورة الرئيسية",class:"max-w-xs rounded-lg shadow-md"},null,8,H)])):y("",!0)]),i("div",J,[i("label",K,f(t(a)("settings.mapImage")),1),r(t(k),{mode:"basic",accept:"image/jpeg,image/png,image/jpg,image/gif,image/svg+xml",maxFileSize:1e7,chooseLabel:"اختيار صورة الخريطة",class:"p-button-outlined p-button-rounded",onSelect:V}),p.value?(v(),_("div",Q,[i("img",{src:p.value,alt:"معاينة صورة الخريطة",class:"max-w-xs rounded-lg shadow-md"},null,8,W)])):y("",!0)])]),r(t(P),{label:t(a)("settings.save"),icon:"pi pi-check",class:"p-button-raised p-button-success",onClick:I,disabled:d.value},null,8,["label","disabled"])]))]))}},ee=L(X,[["__scopeId","data-v-a1cb978a"]]);export{ee as default};

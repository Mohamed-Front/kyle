import{_ as ue,N as pe,R as he,u as ve,r as i,U as me,S as _e,o as ge,g as p,H as L,a as q,c as T,d as s,b as o,w as c,I as V,h as fe,t as r,j as a,F as be,B as we,i as ye,V as xe,e as D,A as $,z as qe,p as Re,f as ke}from"./index-5ffc309d.js";const h=R=>(Re("data-v-e4616767"),R=R(),ke(),R),Ce={class:"grid"},je={class:"col-12"},Te={class:"p-4 card shadow-2 border-round"},Ve={class:"text-2xl font-bold"},De={class:"flex gap-2"},$e={class:"p-input-icon-left"},Me=h(()=>s("i",{class:"pi pi-search"},null,-1)),Se={class:"card shadow-1 surface-0"},Ie={class:"py-4 text-center"},Be=h(()=>s("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),Ne={class:"text-xl"},Ue={class:"flex py-4 justify-content-center align-items-center"},Ee={key:0,class:"mt-3 p-paginator p-component p-unselectable-text"},ze={class:"p-paginator-left-content"},Pe={class:"p-paginator-current"},Fe={class:"p-paginator-right-content"},Ae={class:"p-paginator-pages"},Ge=["disabled"],He=h(()=>s("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)),Le=[He],Oe=["disabled"],Qe=h(()=>s("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)),We=[Qe],Je=["onClick"],Ke=["disabled"],Xe=h(()=>s("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)),Ye=[Xe],Ze=["disabled"],et=h(()=>s("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)),tt=[et],st={class:"p-paginator-rpp-options"},at={class:"flex align-items-center justify-content-center"},ot=h(()=>s("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),lt={class:"flex align-items-center justify-content-center"},nt=h(()=>s("i",{class:"mr-3 pi pi-check-circle",style:{"font-size":"2rem",color:"var(--green-500)"}},null,-1)),it={class:"gap-3"},rt={class:"flex align-items-center"},ct=h(()=>s("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),dt={class:"gap-2 flex-column"},ut={for:"rejectedMessage"},pt={setup(R){const{t:e}=pe(),U=he(),v=ve(),k=i(!0),O=i(""),E=i(""),z=i(""),P=i(null),C=i(!1),f=i(!1),b=i(!1);i(null);const F=i(null),A=i({}),j=i(""),w=i(""),d=i(1),M=i(0),y=i(10),m=i(0),G=i(0),H=i(0),Q=()=>{F.value.exportCSV()},W=n=>{E.value=n,w.value="",f.value=!0},J=n=>{z.value=n,b.value=!0},K=()=>{D.delete(`/api/warehouse-request/${O.value}`).then(()=>{_(),C.value=!1,v.add({severity:"success",summary:e("success"),detail:e("warehouseRequest.deleteSuccess"),life:3e3})}).catch(n=>{v.add({severity:"error",summary:e("error"),detail:e("warehouseRequest.deleteError"),life:3e3})})},X=()=>{D.post(`/api/warehouse-request/accept/${z.value}`).then(()=>{_(),b.value=!1,v.add({severity:"success",summary:e("success"),detail:e("warehouseRequest.acceptSuccess"),life:3e3})}).catch(n=>{v.add({severity:"error",summary:e("error"),detail:e("warehouseRequest.acceptError"),life:3e3})})},Y=()=>{if(!w.value.trim()){v.add({severity:"error",summary:e("error"),detail:e("warehouseRequest.rejectedMessageRequired"),life:3e3});return}D.post(`/api/warehouse-request/reject/${E.value}`,{rejected_message:w.value}).then(()=>{_(),f.value=!1,v.add({severity:"success",summary:e("success"),detail:e("warehouseRequest.rejectSuccess"),life:3e3})}).catch(n=>{v.add({severity:"error",summary:e("error"),detail:e("warehouseRequest.rejectError"),life:3e3})})},Z=n=>{U.push({name:"warehouse_request_show",params:{id:n}})},ee=()=>{A.value={global:{value:null,matchMode:xe.CONTAINS}}};me(()=>{ee()});const _=()=>{k.value=!0,D.get("/api/warehouse-request",{params:{page:d.value,limit:y.value,search:j.value}}).then(n=>{k.value=!1,P.value=n.data.data,M.value=n.data.pagination.total,m.value=n.data.pagination.last_page,G.value=n.data.pagination.from,H.value=n.data.pagination.to}).catch(n=>{k.value=!1,v.add({severity:"error",summary:e("error"),detail:e("warehouseRequest.loadError"),life:3e3}),console.error("Error fetching data:",n)})};_e(j,n=>{d.value=1,_()});const x=n=>{n>=1&&n<=m.value&&(d.value=n,_())},te=n=>{y.value=n,d.value=1,_()};ge(()=>{_()});const se=()=>{U.push({name:"warehouse-request-create"})};return(n,l)=>{const ae=p("InputText"),u=p("Button"),oe=p("Toolbar"),le=p("Toast"),g=p("Column"),ne=p("Tag"),ie=p("ProgressSpinner"),re=p("DataTable"),ce=p("Dropdown"),S=p("Dialog"),de=p("Textarea"),I=L("tooltip"),B=L("can");return q(),T("div",Ce,[s("div",je,[s("div",Te,[o(oe,{class:"mb-4"},{start:c(()=>[s("h2",Ve,r(a(e)("warehouseRequest.title")),1)]),end:c(()=>[s("div",De,[s("span",$e,[Me,o(ae,{modelValue:j.value,"onUpdate:modelValue":l[0]||(l[0]=t=>j.value=t),placeholder:a(e)("warehouseRequest.search")},null,8,["modelValue","placeholder"])]),o(u,{label:a(e)("warehouseRequest.export"),icon:"pi pi-upload",class:"p-export",onClick:Q},null,8,["label"]),o(u,{label:a(e)("warehouseRequest.new"),icon:"pi pi-plus",class:"p-button-success",onClick:se},null,8,["label"])])]),_:1}),o(le),s("div",Se,[V((q(),fe(re,{ref_key:"dt",ref:F,value:P.value,loading:k.value,"data-key":"id",paginator:!1,rows:y.value,filters:A.value,totalRecords:M.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:c(()=>[s("div",Ie,[Be,s("p",Ne,r(a(e)("warehouseRequest.noData")),1)])]),loading:c(()=>[s("div",Ue,[o(ie,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:c(()=>[o(g,{"selection-mode":"multiple","header-style":"width: 3rem"}),o(g,{field:"number",header:a(e)("warehouseRequest.number"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:c(t=>[$(r(t.data.number),1)]),_:1},8,["header"]),o(g,{field:"name",header:a(e)("warehouseRequest.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:c(t=>[$(r(t.data.name),1)]),_:1},8,["header"]),o(g,{field:"email",header:a(e)("warehouseRequest.email"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:c(t=>[$(r(t.data.email),1)]),_:1},8,["header"]),o(g,{field:"address",header:a(e)("warehouseRequest.address"),sortable:!0,"header-style":"width:20%; min-width:15rem;"},{body:c(t=>[$(r(t.data.address),1)]),_:1},8,["header"]),o(g,{field:"status_description",header:a(e)("warehouseRequest.status"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:c(t=>[o(ne,{value:t.data.status_description,severity:{active:"success",pending:"warning",rejected:"danger"}[t.data.status_description]||"danger"},null,8,["value","severity"])]),_:1},8,["header"]),o(g,{header:a(e)("actions"),"header-style":"min-width:15rem;"},{body:c(t=>[V(o(u,{icon:"pi pi-eye",class:"mr-2 p-detail",onClick:N=>Z(t.data.id)},null,8,["onClick"]),[[I,a(e)("view"),void 0,{top:!0}]]),V(o(u,{icon:"pi pi-check",class:"mr-2 p-show",onClick:N=>J(t.data.id),disabled:t.data.status_description!="pending"},null,8,["onClick","disabled"]),[[B,"accept warehouse requests"],[I,a(e)("accept"),void 0,{top:!0}]]),V(o(u,{icon:"pi pi-times",class:"mr-2 p-delete",onClick:N=>W(t.data.id),disabled:t.data.status_description!="pendding"},null,8,["onClick","disabled"]),[[B,"reject warehouse requests"],[I,a(e)("reject"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[B,"list warehouse requests"]]),m.value>0?(q(),T("div",Ee,[s("div",ze,[s("span",Pe,r(a(e)("showing"))+" "+r(G.value)+" "+r(a(e)("to"))+" "+r(H.value)+" "+r(a(e)("of"))+" "+r(M.value)+" "+r(a(e)("entries")),1)]),s("div",Fe,[s("span",Ae,[s("button",{class:"p-paginator-first p-paginator-element p-link",disabled:d.value===1,onClick:l[1]||(l[1]=t=>x(1))},Le,8,Ge),s("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:d.value===1,onClick:l[2]||(l[2]=t=>x(d.value-1))},We,8,Oe),(q(!0),T(be,null,we(m.value,t=>(q(),T("button",{key:t,class:qe(["p-paginator-page p-paginator-element p-link",{"p-highlight":d.value===t}]),onClick:N=>x(t)},r(t),11,Je))),128)),s("button",{class:"p-paginator-next p-paginator-element p-link",disabled:d.value===m.value,onClick:l[3]||(l[3]=t=>x(d.value+1))},Ye,8,Ke),s("button",{class:"p-paginator-last p-paginator-element p-link",disabled:d.value===m.value,onClick:l[4]||(l[4]=t=>x(m.value))},tt,8,Ze)]),s("span",st,[o(ce,{modelValue:y.value,"onUpdate:modelValue":l[5]||(l[5]=t=>y.value=t),options:[5,10,20,30],onChange:te,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):ye("",!0)]),o(S,{visible:C.value,"onUpdate:visible":l[7]||(l[7]=t=>C.value=t),style:{width:"450px"},header:a(e)("warehouseRequest.deleteConfirmTitle"),modal:!0},{footer:c(()=>[o(u,{label:a(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:l[6]||(l[6]=t=>C.value=!1)},null,8,["label"]),o(u,{label:a(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:K},null,8,["label"])]),default:c(()=>[s("div",at,[ot,s("span",null,r(a(e)("warehouseRequest.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),o(S,{visible:b.value,"onUpdate:visible":l[9]||(l[9]=t=>b.value=t),style:{width:"450px"},header:a(e)("warehouseRequest.acceptConfirmTitle"),modal:!0},{footer:c(()=>[o(u,{label:a(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:l[8]||(l[8]=t=>b.value=!1)},null,8,["label"]),o(u,{label:a(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-success",onClick:X},null,8,["label"])]),default:c(()=>[s("div",lt,[nt,s("span",null,r(a(e)("warehouseRequest.acceptConfirmMessage")),1)])]),_:1},8,["visible","header"]),o(S,{visible:f.value,"onUpdate:visible":l[12]||(l[12]=t=>f.value=t),style:{width:"450px"},header:a(e)("warehouseRequest.rejectConfirmTitle"),modal:!0},{footer:c(()=>[o(u,{label:a(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:l[11]||(l[11]=t=>f.value=!1)},null,8,["label"]),o(u,{label:a(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Y},null,8,["label"])]),default:c(()=>[s("div",it,[s("div",rt,[ct,s("span",null,r(a(e)("warehouseRequest.rejectConfirmMessage")),1)]),s("div",dt,[s("p",ut,r(a(e)("warehouseRequest.rejectedMessage")),1),o(de,{modelValue:w.value,"onUpdate:modelValue":l[10]||(l[10]=t=>w.value=t),id:"rejectedMessage",rows:"4",class:"w-full mt-4",placeholder:a(e)("warehouseRequest.rejectedMessagePlaceholder")},null,8,["modelValue","placeholder"])])])]),_:1},8,["visible","header"])])])])}}},vt=ue(pt,[["__scopeId","data-v-e4616767"]]);export{vt as default};

import{_ as M,R as P,r,o as S,H as I,I as h,a,c as n,d as e,t,A as T,X as B,F as _,B as b,i as y,l as U,e as w,Y as g,p as q,f as E}from"./index-5ffc309d.js";const F=u=>(q("data-v-3321c89f"),u=u(),E(),u),R={class:"permission-manager"},A={class:"controls"},H={class:"name-input"},L={for:"roleName"},W=F(()=>e("span",{class:"required"},"*",-1)),X=["placeholder"],Y={key:0,class:"loading"},j={key:0,class:"table-view"},z=["onClick","disabled"],G=["id","value"],J={key:1,class:"card-view"},K={class:"permission-items"},O={class:"permission-info"},Q=["id","value"],Z=["for"],x=["onClick","disabled"],ee={key:2,class:"selection-summary"},se={class:"id-chips"},le=["disabled"],te={class:"modal-content"},oe={setup(u){const C=P(),m=r([]),$=r(!0),i=r([]),d=r(""),v=r(!1),f=r(""),p=r(!1),D=()=>{w.get("api/role/all/permissions").then(s=>{m.value=s.data.data,$.value=!1})},k=s=>{f.value=s||"No description available",v.value=!0},V=()=>{if(!d.value){alert("Please enter a role name");return}const s={name:d.value,permissions:i.value};w.post("/api/role",s).then(o=>{C.push({name:"roles"})}).catch(o=>{console.error("Error:",o)})};return S(()=>{D()}),(s,o)=>{const N=I("can");return h((a(),n("div",R,[e("h1",null,t(s.$t("role.role_Permissions_Manager")),1),e("div",A,[e("div",H,[e("label",L,[T(t(s.$t("role.role_Name")),1),W]),h(e("input",{type:"text",id:"roleName","onUpdate:modelValue":o[0]||(o[0]=l=>d.value=l),placeholder:s.$t("role.enter_role_name"),required:""},null,8,X),[[B,d.value]])]),e("button",{onClick:o[1]||(o[1]=l=>p.value=!p.value),class:"view-toggle"},t(p.value?s.$t("role.switchToCardView"):s.$t("role.switchToTableView")),1)]),$.value?(a(),n("div",Y,t(s.$t("role.loading.permissions")),1)):(a(),n(_,{key:1},[p.value?(a(),n("div",j,[e("table",null,[e("thead",null,[e("tr",null,[e("th",null,t(s.$t("role.permission")),1),e("th",null,t(s.$t("role.description")),1),e("th",null,t(s.$t("role.select")),1)])]),e("tbody",null,[(a(!0),n(_,null,b(m.value,l=>(a(),n("tr",{key:l.id},[e("td",null,t(l.name),1),e("td",null,[e("button",{onClick:c=>k(l.description),class:"description-btn",disabled:!l.description},t(l.description?s.$t("role.view"):s.$t("role.none")),9,z)]),e("td",null,[h(e("input",{type:"checkbox",id:`permission-${l.id}-table`,value:l.id,"onUpdate:modelValue":o[2]||(o[2]=c=>i.value=c)},null,8,G),[[g,i.value]])])]))),128))])])])):(a(),n("div",J,[e("div",K,[(a(!0),n(_,null,b(m.value,l=>(a(),n("div",{key:l.id,class:"permission-item"},[e("div",O,[h(e("input",{type:"checkbox",id:`permission-${l.id}`,value:l.id,"onUpdate:modelValue":o[3]||(o[3]=c=>i.value=c)},null,8,Q),[[g,i.value]]),e("label",{for:`permission-${l.id}`},t(l.name),9,Z)]),e("button",{onClick:c=>k(l.description),class:"description-btn",disabled:!l.description},t(l.description?s.$t("role.viewDescription"):s.$t("role.noDescription")),9,x)]))),128))])]))],64)),i.value.length>0?(a(),n("div",ee,[e("h3",null,t(s.$t("role.selectedPermissions")),1),e("p",null,t(s.$t("role.totalSelected"))+": "+t(i.value.length),1),e("div",se,[(a(!0),n(_,null,b(i.value,l=>(a(),n("span",{key:l,class:"id-chip"},t(l),1))),128))])])):y("",!0),e("button",{onClick:V,class:"submit-btn",disabled:i.value.length===0||!d.value},t(s.$t("role.createWithPermissions")),9,le),v.value?(a(),n("div",{key:3,class:"modal-overlay",onClick:o[5]||(o[5]=U(l=>v.value=!1,["self"]))},[e("div",te,[e("h3",null,t(s.$t("role.permission_Description")),1),e("p",null,t(f.value),1),e("button",{onClick:o[4]||(o[4]=l=>v.value=!1),class:"close-modal"},t(s.$t("role.close")),1)])])):y("",!0)])),[[N,"create roles"]])}}},ne=M(oe,[["__scopeId","data-v-3321c89f"]]);export{ne as default};

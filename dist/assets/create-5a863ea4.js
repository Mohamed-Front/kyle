import{_ as N,O as R,v as U,i,o as y,c as b,a as t,P as d,b as u,h as o,g as s,p as j,F as z,A as B,R as I,Q as A,J as g,C as G,s as J}from"./index-063be7f6.js";const L={class:"max-w-4xl mx-auto p-6",dir:"rtl"},O={class:"bg-white rounded-2xl shadow-2xl overflow-hidden"},S={class:"p-8"},W={key:0,class:"space-y-6"},E=["src"],M={class:"flex justify-center gap-4"},Q={class:"cursor-pointer"},H={key:1,class:"space-y-5"},K={class:"flex justify-center gap-6 pt-12"},X={__name:"create",setup(Y){const _=R(),r=U(),p=i(""),c=i(""),n=i(null),m=i(null),v=i(null),f=i(!1),x=i(!1),k=a=>{a.preventDefault(),f.value=!0},C=()=>{f.value=!1},F=a=>{a.preventDefault(),f.value=!1;const e=a.dataTransfer.files[0];e&&e.type.startsWith("image/")?w(e):r.add({severity:"warn",summary:"ملف غير صالح",detail:"يرجى رفع صورة فقط",life:3e3})},h=a=>{const e=a.target.files[0];e&&w(e)},w=a=>{if(a.size>10*1024*1024){r.add({severity:"warn",summary:"الحجم كبير",detail:"يجب ألا يتجاوز حجم الصورة 10 ميجابايت",life:4e3});return}m.value=a;const e=new FileReader;e.onload=l=>{v.value=l.target.result},e.readAsDataURL(a)},q=()=>{m.value=null,v.value=null;const a=document.querySelector('input[type="file"]');a&&(a.value="")},P=async()=>{var e,l,D,V;if(!((e=p.value)!=null&&e.trim())){r.add({severity:"error",summary:"حقل مطلوب",detail:"اسم المنتج مطلوب",life:3e3});return}if(!((l=c.value)!=null&&l.trim())){r.add({severity:"error",summary:"حقل مطلوب",detail:"الوصف مطلوب",life:3e3});return}if(!n.value||n.value<=0){r.add({severity:"error",summary:"حقل مطلوب",detail:"السعر يجب أن يكون أكبر من صفر",life:3e3});return}if(!m.value){r.add({severity:"error",summary:"حقل مطلوب",detail:"يرجى رفع صورة المنتج",life:3e3});return}x.value=!0;const a=new FormData;a.append("name",p.value.trim()),a.append("description",c.value.trim()),a.append("price",n.value),a.append("product_image",m.value);try{await J.post("/api/product",a,{headers:{"Content-Type":"multipart/form-data"}}),r.add({severity:"success",summary:"تم بنجاح!",detail:"تم إضافة المنتج بنجاح",life:4e3}),setTimeout(()=>{_.push({name:"products"})},1500)}catch(T){const $=((V=(D=T.response)==null?void 0:D.data)==null?void 0:V.message)||"فشل إضافة المنتج";r.add({severity:"error",summary:"خطأ",detail:$,life:5e3})}finally{x.value=!1}};return(a,e)=>(y(),b(z,null,[t("div",L,[t("div",O,[e[9]||(e[9]=t("div",{class:"bg-gradient-to-l from-[#1d1a1a] to-[#474444] px-8 py-7"},[t("h1",{class:"text-3xl font-bold text-white text-center"}," إضافة منتج جديد "),t("p",{class:"text-center text-white/90 mt-2 text-lg"},"أدخل تفاصيل المنتج ليظهر في المتجر")],-1)),t("div",S,[t("form",{onSubmit:d(P,["prevent"]),class:"space-y-9"},[t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-bold text-gray-700 mb-2"},[u(" اسم المنتج "),t("span",{class:"text-red-500"},"*")],-1)),o(s(B),{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=l=>p.value=l),placeholder:"مثال: آيفون 15 برو ماكس - 256 جيجا",class:"w-full text-lg py-3",required:""},null,8,["modelValue"])]),t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-bold text-gray-700 mb-2"},[u(" السعر () "),t("span",{class:"text-red-500"},"*")],-1)),o(s(I),{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=l=>n.value=l),min:0,max:999999,step:.01,mode:"decimal",minFractionDigits:2,maxFractionDigits:2,placeholder:"مثال: 4599.00",class:"w-full",inputClass:"text-lg py-3 text-right",required:""},null,8,["modelValue"])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-bold text-gray-700 mb-2"},[u(" وصف المنتج "),t("span",{class:"text-red-500"},"*")],-1)),o(s(A),{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=l=>c.value=l),rows:"6",placeholder:"اكتب وصفًا مفصلًا عن المنتج، المواصفات، المميزات...",class:"w-full text-base",required:""},null,8,["modelValue"])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-bold text-gray-700 mb-3"},[u(" صورة المنتج "),t("span",{class:"text-red-500"},"*")],-1)),t("div",{onDragover:d(k,["prevent"]),onDragleave:d(C,["prevent"]),onDrop:d(F,["prevent"]),class:j(["relative border-3 border-dashed rounded-2xl p-12 text-center cursor-pointer transition-all duration-300 shadow-md",f.value?"border-blue-600 bg-blue-50/70":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"])},[t("input",{type:"file",accept:"image/*",onChange:h,class:"absolute inset-0 opacity-0 cursor-pointer z-10",required:""},null,32),v.value?(y(),b("div",W,[t("img",{src:v.value,alt:"معاينة صورة المنتج",class:"mx-auto max-h-96 rounded-xl shadow-2xl object-cover border-4 border-white"},null,8,E),t("div",M,[o(s(g),{type:"button",label:"إزالة الصورة",icon:"pi pi-trash",severity:"danger",outlined:"",onClick:d(q,["stop"])}),t("label",Q,[o(s(g),{label:"تغيير الصورة",icon:"pi pi-camera",outlined:""}),t("input",{type:"file",accept:"image/*",onChange:h,class:"hidden"},null,32)])])])):(y(),b("div",H,[...e[7]||(e[7]=[t("i",{class:"pi pi-image text-7xl text-gray-400"},null,-1),t("div",null,[t("p",{class:"text-xl font-bold text-gray-700"},[t("span",{class:"text-blue-600 font-extrabold"},"اضغط للرفع"),u(" أو اسحب وأفلت الصورة هنا ")]),t("p",{class:"text-sm text-gray-500 mt-2"}," المقاس الموصى: 800×800 أو أكبر • صيغ PNG، JPG، WebP • الحد الأقصى 10 ميجابايت ")],-1)])]))],34)]),t("div",K,[o(s(g),{type:"button",label:"إلغاء",icon:"pi pi-times",severity:"secondary",outlined:"",onClick:e[3]||(e[3]=l=>s(_).back()),disabled:x.value,class:"px-10 py-3 text-lg"},null,8,["disabled"]),o(s(g),{type:"submit",label:"إضافة المنتج",icon:"pi pi-plus",loading:x.value,class:"px-12 py-3 text-lg font-bold"},null,8,["loading"])])],32)])])]),o(s(G),{position:"top-right"})],64))}},ee=N(X,[["__scopeId","data-v-6f88768e"]]);export{ee as default};
